import{r,n as O,j as e,q as z,a8 as he}from"./index-DtwSxASm.js";import{f as W,g as _,h as xe,d as pe}from"./index-DYfuKO4A.js";import{i as B}from"./isNil-BVBaoyN1.js";import{u as ve}from"./uniqueId-DQxOizSh.js";import{c as E}from"./classNames-ePRZs5sB.js";import{M as G}from"./index-BDJeHqko.js";import{u as J,a as je,b as H,c as Ie,d as Ce,e as be,f as De,s as Fe,g as Ne,h as Re,i as Pe,j as ye,k as we,l as Ee,m as Te,F as Me,n as ke,o as Se,p as He,q as Ae,r as Ue,t as Q}from"./Tooltip-rsOlGEfv.js";import{a as Ke}from"./floating-ui.dom-DBm5Idhu.js";const A=r.createContext({}),Le=A.Provider,qe=({placement:t,children:s})=>t&&t.includes("right")?e.jsxs(e.Fragment,{children:[s,e.jsx(W,{})]}):t&&t.includes("left")?e.jsxs(e.Fragment,{children:[e.jsx(_,{}),s]}):t&&t.includes("right")?e.jsxs(e.Fragment,{children:[s,e.jsx(xe,{})]}):e.jsxs(e.Fragment,{children:[s,e.jsx(pe,{})]}),Ye=t=>{const{className:s,renderTitle:a,children:d,placement:f="bottom-start",disabled:l,ref:v,toggleClassName:m,...c}=t,h=O("dropdown-toggle",s,m,l&&"dropdown-toggle-disabled"),o=O(h,"dropdown-toggle-default");return a?e.jsx("div",{className:h,...c,ref:v,children:a}):e.jsx("div",{ref:v,className:o,...c,children:e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(qe,{placement:f,children:d})})})};function X(t){const s=r.useRef(null);return t||s}const $e=(t=10)=>{const s=[],a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=a.length,f=t;for(let l=0;l<f;l++)s[l]=a.charAt(Math.floor(Math.random()*d));return s.join("")};function Z(t="",s=10){const a=r.useRef(void 0);return a.current||(a.current=`${ve(t)}-${$e(s)}`),a.current}const Oe=t=>{const{asElement:s="li",children:a,active:d,disabled:f,className:l,style:v,eventKey:m,onSelect:c,ref:n=null,...j}=t,{direction:h}=z(),o=r.useContext(A),p=X(n),x=Z("menu-item-"),F=d||!B(o==null?void 0:o.activeKey)&&(o==null?void 0:o.activeKey)===m;return e.jsx("ul",{style:v,className:"relative",...j,children:e.jsxs(G,{ref:p,disabled:f,asElement:s,id:x,isActive:F,eventKey:m,className:E("dropdown-submenu-item",l),onSelect:c,children:[e.jsx("span",{children:a}),h==="rtl"?e.jsx(_,{}):e.jsx(W,{})]})})},M=r.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1});M.Provider;const k=t=>{const{children:s,title:a,renderTitle:d,disabled:f,toggleClassName:l,menuClass:v,placement:m,trigger:c="click",onOpen:n,ref:j,...h}=t,[o,p]=r.useState(!1),[x,F]=r.useState(!1),[N,R]=r.useState(null),T=r.useRef([]),I=r.useRef([]),{direction:P}=z(),y=r.useContext(M),g=J(),C=je(),i=H(),U=Ie(),b=i!=null,K=u=>{f||(p(u),n==null||n(u))},te=()=>P==="ltr"?"bottom-start":"bottom-end",se=()=>P==="ltr"?"right-start":"left-start",{floatingStyles:ne,refs:L,context:D}=Ce({nodeId:C,open:o,onOpenChange:u=>{K(u)},placement:m||(b?se():te()),middleware:[Ae(),Ue()],whileElementsMounted:Ke}),{isMounted:oe,styles:ae}=be(D,{common:({side:u})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[u]}),initial:{transform:"translateY(-5%)",opacity:0},duration:200,open:{opacity:1,transform:"translateY(0%)"},close:{opacity:0,transform:"translateY(-5%)"}}),re=De(D,{enabled:b||c==="hover",delay:{open:75},handleClose:Fe({blockPointerEvents:!0})}),ie=Ne(D,{event:"mousedown",toggle:!b,ignoreMouse:b}),le=Re(D,{role:"menu"}),ce=Pe(D,{bubbles:!0}),ue=ye(D,{listRef:T,activeIndex:N,nested:b,onNavigate:R}),de=we(D,{listRef:I,onMatch:o?R:void 0,activeIndex:N}),{getReferenceProps:fe,getFloatingProps:me,getItemProps:ge}=Ee([re,le,ce,ue,de,...c==="click"?[ie]:[]]);r.useEffect(()=>{if(!g)return;function u(){p(!1),n==null||n(!1)}function w($){$.nodeId!==C&&$.parentId===i&&(p(!1),n==null||n(!1))}return g.events.on("click",u),g.events.on("menuopen",w),()=>{g.events.off("click",u),g.events.off("menuopen",w)}},[g,C,i]),r.useEffect(()=>{o&&g&&g.events.emit("menuopen",{parentId:i,nodeId:C})},[g,o,C,i]);const q=Te([L.setReference,U.ref,j]);r.useImperativeHandle(j,()=>({handleDropdownOpen:()=>{p(!0),n==null||n(!0)},handleDropdownClose:()=>{p(!1),n==null||n(!1)}}),[n]);const Y={...fe(y.getItemProps({...h,onFocus(u){var w;(w=h.onFocus)==null||w.call(h,u),F(!1),y.setHasFocusInside(!0)}})),...c==="context"?{onContextMenu:u=>{u.preventDefault(),K(!0)}}:{}};return e.jsxs(Me,{id:C,children:[b?e.jsx("li",{ref:q,tabIndex:y.activeIndex===U.index?0:-1,"data-open":o?"":void 0,"data-nested":"","data-focus-inside":x?"":void 0,className:E(l,"outline-hidden"),...Y,children:e.jsx(Oe,{children:d||a})}):e.jsx(Ye,{ref:q,role:"menuitem","data-open":o?"":void 0,"data-focus-inside":x?"":void 0,className:E(l),disabled:f,placement:m,renderTitle:d,...Y,children:a}),e.jsx(M.Provider,{value:{activeIndex:N,setActiveIndex:R,getItemProps:ge,setHasFocusInside:F,isOpen:o},children:e.jsx(ke,{elementsRef:T,labelsRef:I,children:oe&&e.jsx(Se,{children:e.jsx(He,{context:D,modal:!1,initialFocus:b?-1:0,returnFocus:!b,children:e.jsx("div",{ref:L.setFloating,style:ne,...me(),className:"outline-hidden z-30",children:e.jsx("ul",{className:E("dropdown-menu min-w-[160px]",v),style:ae,children:s})})})})})})]})},Ve=({activeKey:t,ref:s,...a})=>H()===null?e.jsx(Le,{value:{activeKey:t},children:e.jsx(Q,{children:e.jsx(k,{...a,ref:s})})}):e.jsx(k,{...a,ref:s}),{DEFAULT:ze,DIVIDER:We,HEADER:V,CUSTOM:S}=he,_e=t=>{const{asElement:s="li",children:a,active:d,disabled:f,className:l,style:v,eventKey:m,onSelect:c,onClick:n,onFocus:j,ref:h=null,variant:o=ze,...p}=t,x=r.useContext(A),F=r.useContext(M),N=X(h),R=Z("menu-item-"),T=d||!B(x==null?void 0:x.activeKey)&&(x==null?void 0:x.activeKey)===m,I=J(),P=r.useCallback(i=>{c==null||c(m||"",i),n==null||n(i)},[m,n,c]),y=r.useCallback(i=>{f||(P(i),I==null||I.events.emit("click"))},[f,P,I==null?void 0:I.events]),g={...F.getItemProps({onClick(i){y(i)},onFocus(i){j==null||j(i),F.setHasFocusInside(!0)}})};if(o===We||o===V||o===S)return e.jsx(s,{ref:N,id:R,style:v,className:E(`menu-item-${o}`,l),...o===S?g:{},...p,children:(o===V||o===S)&&a});function C(){return r.isValidElement(a)?r.cloneElement(a):a}return e.jsx(G,{ref:N,asElement:s,style:v,isActive:T,disabled:f,eventKey:m,className:l,...g,...p,children:C()})},Be=({ref:t,...s})=>H()===null?e.jsx(Q,{children:e.jsx(k,{...s,ref:t})}):e.jsx(k,{...s,ref:t}),ee=Ve;ee.Item=_e;ee.Menu=Be;export{ee as D};
