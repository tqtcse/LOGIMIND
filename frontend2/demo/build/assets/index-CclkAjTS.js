var _t=Object.defineProperty;var St=(s,e,t)=>e in s?_t(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var I=(s,e,t)=>St(s,typeof e!="symbol"?e+"":e,t);import{j as g,c as q,r as P,$ as At,A as It,z as le,a7 as lt,D as Pt}from"./index-DtwSxASm.js";import{C as jt}from"./Card-CvsXYMKX.js";import{S as Nt,u as Ot}from"./useResponsive-DY1IWvVa.js";import{A as Lt,u as Dt}from"./index-o-oCqQIP.js";import{f as Mt}from"./fileSizeUnit-BLHUfm7q.js";import{s as $t,t as zt,e as Ht,u as Bt}from"./index-DYfuKO4A.js";import{B as ae}from"./Button-i5g00eBi.js";import{U as qt,t as Ft,N as Gt}from"./Upload-CbTYts6L.js";import{u as be}from"./uniqueId-DQxOizSh.js";import{c as Ut,aB as Xt,a7 as Vt,_ as Zt}from"./index-nzjHbTAU.js";import{I as Re}from"./Input-BNk8Jtou.js";import{S as Wt}from"./Select-DLBl41SR.js";import{F as ct,a as pe,u as Yt,C as Qt}from"./index.esm-Cn3F_1Fv.js";import{D as ut}from"./Dialog-CFE4-9zb.js";import{T as Kt}from"./Tooltip-rsOlGEfv.js";import{t as Jt,z as Le}from"./index-DNuGD4fr.js";import"./debounce-DWiTLIjT.js";import"./isSymbol-CwBCR2h3.js";import"./classNames-ePRZs5sB.js";import"./context-DPxwjVT1.js";import"./cloneDeep-BSOSHLnM.js";import"./_getPrototype-m6aH4G2r.js";import"./index-BnPKvy3X.js";import"./CloseButton-C-zx-kDW.js";import"./index-CHU72eNV.js";import"./StatusIcon-C3ptiLRj.js";import"./proxy-CApU-jHi.js";import"./isNil-BVBaoyN1.js";import"./floating-ui.dom-DBm5Idhu.js";import"./index-DwHWSaNy.js";import"./index-Chjiymov.js";import"./index-_Kd8pdCn.js";const en=s=>{const{header:e,children:t,className:n,input:a}=s;return g.jsxs("div",{className:q("h-full flex flex-col justify-between",n),children:[e,t,a]})},tn=({attachments:s})=>g.jsx("div",{className:"flex flex-col",children:s&&s.map((e,t)=>{var a,o;const n=e.mediaUrl+t;return e.type==="image"?g.jsx("div",{children:g.jsx("img",{className:"rounded-xl my-2",src:e.mediaUrl,alt:""})},n):e.type==="video"?g.jsx("div",{children:g.jsx("a",{href:e.mediaUrl,target:"_blank",rel:"noreferrer",children:g.jsx("video",{className:"rounded-xl my-2",src:e.mediaUrl})})},n):e.type==="audio"?g.jsx("div",{children:g.jsxs("audio",{controls:!0,children:[g.jsx("source",{src:e.mediaUrl}),"Your browser does not support the audio element."]})},n):g.jsxs("a",{download:!0,className:"flex items-center gap-2 p-2 rounded-xl border border-gray-300 dark:border-gray-600 min-w-[250px] bg-white dark:bg-gray-600 my-2 no-underline",href:e.mediaUrl,children:[g.jsx($t,{className:"text-3xl heading-text"}),g.jsxs("div",{children:[g.jsx("div",{className:"heading-text font-bold",children:(a=e.source)==null?void 0:a.name}),g.jsx("div",{className:"heading-text",children:Mt((o=e.source)==null?void 0:o.size)})]})]},n)})}),De=s=>{const{attachments:e,content:t,showAvatar:n=!0,avatarGap:a,isMyMessage:o,sender:u,type:l,customRenderer:i,customAction:r,bubbleClass:c}=s;if(u.id!=="ai"){const p=localStorage.getItem("imgURL");u.avatarImageUrl=`${p}`}return g.jsx(g.Fragment,{children:l==="divider"?g.jsx(g.Fragment,{}):g.jsx("div",{className:q("flex",o&&"justify-end"),children:g.jsxs("div",{className:"flex flex-col",children:[g.jsxs("div",{className:q("inline-flex items-end gap-2",o&&"justify-end flex-row-reverse"),children:[n&&g.jsx("div",{className:q("w-[35px]"),children:a&&g.jsx(Lt,{src:u.avatarImageUrl,size:35})}),g.jsx("div",{className:q("bubble flex flex-col justify-center h-full max-w-[750px] rounded-xl px-5 py-2.5 bg-gray-100 dark:bg-gray-700 prose text-sm text-gray-900 dark:text-gray-100",c),children:i?i():g.jsxs(g.Fragment,{children:[e&&(e==null?void 0:e.length)>0&&g.jsx(tn,{attachments:e}),t]})})]}),r&&g.jsx("div",{children:g.jsxs("div",{className:q("flex items-end gap-2",o&&" flex-row-reverse"),children:[n&&a&&g.jsx("div",{className:q("w-[35px]")}),r()]})})]})})})},nn=s=>{const{list:e=[],showAvatar:t=!0,typing:n=!1,avatarGap:a,customRenderer:o,customAction:u,messageListClass:l,bubbleClass:i,ref:r}=s;return g.jsx("div",{className:q("relative",l),children:g.jsx("div",{className:"absolute top-0 left-0 h-full w-full py-4",children:g.jsx(Nt,{autoHide:!0,className:"overflow-y-auto h-full max-w-full",scrollableNodeProps:{ref:r},children:g.jsxs("div",{className:"flex flex-col gap-4 px-4",children:[e.map((c,p)=>g.jsx(De,{showAvatar:t,avatarGap:a,bubbleClass:i,...c,...o?{customRenderer:()=>o(c,p)}:{},...u?{customAction:()=>u(c,p)}:{}},c.id)),n&&g.jsx(De,{id:n.name+"typing",sender:n,type:"regular",showAvatar:t,bubbleClass:i,avatarGap:a,content:g.jsxs("span",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"size-1.5 rounded-full bg-gray-700 motion-safe:animate-[bounce_1s_ease-in-out_infinite] dark:bg-gray-300"}),g.jsx("span",{className:"size-1.5 rounded-full bg-gray-700 motion-safe:animate-[bounce_0.5s_ease-in-out_infinite] dark:bg-gray-300"}),g.jsx("span",{className:"size-1.5 rounded-full bg-gray-700 motion-safe:animate-[bounce_1s_ease-in-out_infinite] dark:bg-gray-300"})]})})]})})})})},rn={useMergeRef:Dt},{useMergeRef:sn}=rn,an=s=>{const[e,t]=P.useState([]),{placeholder:n,onInputChange:a,disabled:o,ref:u=null}=s,l=P.useRef(null),i=()=>{l.current&&(l.current.value=""),t([])},r=()=>{var p,f;(p=l.current)!=null&&p.value&&(a==null||a({value:((f=l.current)==null?void 0:f.value)||"",attachments:e}),i())},c=p=>{var f;p.key==="Enter"&&(a==null||a({value:((f=l.current)==null?void 0:f.value)||"",attachments:e}),i())};return g.jsxs("div",{className:"border-2 border-gray-200 dark:border-gray-700 rounded-xl min-h-[50px] px-3 flex flex-col",children:[e.length>0&&g.jsx(qt,{fileList:e,fileListClass:"flex gap-4",fileItemClass:"flex gap-8",onFileRemove:t,children:g.jsx(g.Fragment,{})}),g.jsxs("div",{className:"flex items-center gap-2 w-full h-[50px]",children:[g.jsx("input",{ref:sn(l,u),className:"flex-1 h-full placeholder:text-gray-400 bg-transparent focus:outline-hidden heading-text",placeholder:n,disabled:o,onKeyDown:c}),g.jsx(ae,{size:"xs",shape:"circle",variant:"solid",icon:g.jsx(zt,{}),onClick:r})]})]})},on=s=>{const{messageList:e,showMessageList:t=!0,children:n,header:a,placeholder:o,onInputChange:u,showAvatar:l,avatarGap:i,customRenderer:r,customAction:c,bubbleClass:p,typing:f,messageListClass:b,containerClass:k,ref:x}=s;return g.jsxs(en,{className:k,header:a,input:g.jsx(an,{placeholder:o,onInputChange:u,disabled:s.disableInput}),children:[t&&g.jsx(nn,{ref:x,list:e,showAvatar:l,avatarGap:i,customRenderer:r,customAction:c,typing:f,messageListClass:b,bubbleClass:p}),n]})},ln={selectedConversation:"",selectedConversationRecord:[],chatHistory:[],renameDialog:{id:"",title:"",open:!1},isTyping:!1},Ce=At((s,e)=>({...ln,setSelectedConversation:t=>s(()=>({selectedConversation:t})),setChatHistory:t=>s(()=>({chatHistory:t})),setChatHistoryName:t=>s(()=>({chatHistory:e().chatHistory.map(a=>(a.id===t.id&&(a.title=t.title),a))})),setRenameDialog:t=>s(()=>({renameDialog:t})),setSelectedConversationRecord:t=>s(()=>{let n=e().selectedConversationRecord;return n.includes(t)?n=n.filter(a=>a!==t):n.push(t),{selectedConversationRecord:n}}),pushChatHistory:t=>s(()=>({chatHistory:[t,...e().chatHistory]})),pushConversation:(t,n)=>s(()=>({chatHistory:e().chatHistory.map(o=>{var u;return o.id===t&&(o.conversation||(o.conversation=[]),(u=o.conversation)==null||u.push(n)),o})})),setIsTyping:t=>s(()=>({isTyping:t})),disabledChatFresh:()=>s(()=>({chatHistory:e().chatHistory.map(n=>{var a;return n.id===e().selectedConversation&&(n.conversation=(a=n.conversation)==null?void 0:a.map(o=>(o.fresh&&(o.fresh=!1),o))),n})}))}));async function cn(s){return It.fetchDataWithAxios({url:"/ai/chat",method:"post",data:s})}const ht=()=>{const{selectedConversation:s,setSelectedConversation:e,pushChatHistory:t,pushConversation:n,setIsTyping:a}=Ce(),o=(r,c)=>{n(r,{id:be("ai-conversation-"),sender:{id:"1",name:"Angelina Gotelli",avatarImageUrl:"/img/avatars/thumb-1.jpg"},content:c,timestamp:le().toDate(),type:"regular",isMyMessage:!0})},u=async(r,c,p)=>{const f=await cn({prompt:c,attachments:p});n(r,{id:be("ai-conversation-"),sender:{id:"ai",name:"Chat AI",avatarImageUrl:"/img/thumbs/ai.jpg"},content:f.choices[0].message.content||"",timestamp:le().toDate(),type:"regular",isMyMessage:!1,fresh:!0}),a(!1)},l=async(r,c,p)=>{e(r),await u(r,c,p)};return{handleSend:async(r,c)=>{if(a(!0),s)o(s,r),await u(s,r);else{const p=be("ai-chat-");t({id:p,title:r,lastConversation:"",createdTime:le().unix(),updatedTime:le().unix(),enable:!1}),o(p,r),await l(p,r,c)}}}},un={idea:g.jsx(Zt,{className:"text-blue-500"}),guide:g.jsx(Vt,{className:"text-emerald-500"}),writing:g.jsx(Xt,{className:"text-amber-500"}),coding:g.jsx(Ut,{className:"text-indigo-500"})},hn=[{title:"Hãy cho tui thông tin liên quan để hướng dẫn cách tra cứu mã hscode",prompt:"I'm going whale watching this weekend and want to appear knowledgeable about killer whales. Tell me a few unique and interesting facts I can share.",type:"guide"},{title:"Định dạng câu hỏi mà tui nên hỏi như nào để tăng độ chính xác khi hỏi",prompt:"Give me 10 tips for room organization. ",type:"idea"}],pn=()=>{const{handleSend:s}=ht();return g.jsx("div",{className:"max-w-[900px] w-full mx-auto mt-20 ",children:g.jsxs("div",{children:[g.jsxs("div",{className:"heading-text text-4xl leading-snug",children:[g.jsx("span",{className:"font-semibold bg-linear-to-r from-indigo-500 to-red-400 bg-clip-text text-transparent text-5xl",children:"Xin chào"}),g.jsx("br",{}),g.jsx("span",{children:"Tôi có thể giúp gì bạn cho hôm nay?"})]}),g.jsx("div",{className:"mt-8 grid grid-cols-2 xl:grid-cols-4 gap-4 xl:pl-30 ",children:hn.map(e=>g.jsxs("div",{className:"flex flex-col gap-4 justify-between rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 p-5 min-h-40 2xl:min-h-60 cursor-pointer",role:"button",onClick:()=>s(e.title),children:[g.jsx("h6",{className:"font-normal",children:e.title}),g.jsx("div",{children:g.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-full p-2 inline-flex",children:g.jsx("span",{className:"text-2xl",children:un[e.type]})})})]},e.title))})]})})},fn=(s,e)=>{const t=P.useRef(null),n=P.useRef(s);return P.useEffect(()=>{n.current=s},[s]),P.useEffect(()=>{if(e!==null){const a=()=>{n.current&&n.current()};return t.current=window.setInterval(a,e),()=>{t.current!==null&&window.clearInterval(t.current)}}},[e]),t},ke=(s,e,t)=>s.split(e,t).join(" ").length,ye=(s,e)=>{let t=0,n=0;for(let a=0;a<s.length&&!(t+s[a]>e);a++)n++,t+=s[a];return[n,e-t]};var Q={},Z={},ce={},F={},G={},ve={},Me;function pt(){return Me||(Me=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.Doctype=s.CDATA=s.Tag=s.Style=s.Script=s.Comment=s.Directive=s.Text=s.Root=s.isTag=s.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=s.ElementType||(s.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}s.isTag=t,s.Root=e.Root,s.Text=e.Text,s.Directive=e.Directive,s.Comment=e.Comment,s.Script=e.Script,s.Style=e.Style,s.Tag=e.Tag,s.CDATA=e.CDATA,s.Doctype=e.Doctype}(ve)),ve}var R={},$e;function ze(){if($e)return R;$e=1;var s=R&&R.__extends||function(){var h=function(d,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,C){v.__proto__=C}||function(v,C){for(var N in C)Object.prototype.hasOwnProperty.call(C,N)&&(v[N]=C[N])},h(d,m)};return function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(d,m);function v(){this.constructor=d}d.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),e=R&&R.__assign||function(){return e=Object.assign||function(h){for(var d,m=1,v=arguments.length;m<v;m++){d=arguments[m];for(var C in d)Object.prototype.hasOwnProperty.call(d,C)&&(h[C]=d[C])}return h},e.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.cloneNode=R.hasChildren=R.isDocument=R.isDirective=R.isComment=R.isText=R.isCDATA=R.isTag=R.Element=R.Document=R.CDATA=R.NodeWithChildren=R.ProcessingInstruction=R.Comment=R.Text=R.DataNode=R.Node=void 0;var t=pt(),n=function(){function h(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(h.prototype,"parentNode",{get:function(){return this.parent},set:function(d){this.parent=d},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"previousSibling",{get:function(){return this.prev},set:function(d){this.prev=d},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"nextSibling",{get:function(){return this.next},set:function(d){this.next=d},enumerable:!1,configurable:!0}),h.prototype.cloneNode=function(d){return d===void 0&&(d=!1),j(this,d)},h}();R.Node=n;var a=function(h){s(d,h);function d(m){var v=h.call(this)||this;return v.data=m,v}return Object.defineProperty(d.prototype,"nodeValue",{get:function(){return this.data},set:function(m){this.data=m},enumerable:!1,configurable:!0}),d}(n);R.DataNode=a;var o=function(h){s(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t.ElementType.Text,m}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),d}(a);R.Text=o;var u=function(h){s(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t.ElementType.Comment,m}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),d}(a);R.Comment=u;var l=function(h){s(d,h);function d(m,v){var C=h.call(this,v)||this;return C.name=m,C.type=t.ElementType.Directive,C}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),d}(a);R.ProcessingInstruction=l;var i=function(h){s(d,h);function d(m){var v=h.call(this)||this;return v.children=m,v}return Object.defineProperty(d.prototype,"firstChild",{get:function(){var m;return(m=this.children[0])!==null&&m!==void 0?m:null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"childNodes",{get:function(){return this.children},set:function(m){this.children=m},enumerable:!1,configurable:!0}),d}(n);R.NodeWithChildren=i;var r=function(h){s(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t.ElementType.CDATA,m}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),d}(i);R.CDATA=r;var c=function(h){s(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t.ElementType.Root,m}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),d}(i);R.Document=c;var p=function(h){s(d,h);function d(m,v,C,N){C===void 0&&(C=[]),N===void 0&&(N=m==="script"?t.ElementType.Script:m==="style"?t.ElementType.Style:t.ElementType.Tag);var D=h.call(this,C)||this;return D.name=m,D.attribs=v,D.type=N,D}return Object.defineProperty(d.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"tagName",{get:function(){return this.name},set:function(m){this.name=m},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"attributes",{get:function(){var m=this;return Object.keys(this.attribs).map(function(v){var C,N;return{name:v,value:m.attribs[v],namespace:(C=m["x-attribsNamespace"])===null||C===void 0?void 0:C[v],prefix:(N=m["x-attribsPrefix"])===null||N===void 0?void 0:N[v]}})},enumerable:!1,configurable:!0}),d}(i);R.Element=p;function f(h){return(0,t.isTag)(h)}R.isTag=f;function b(h){return h.type===t.ElementType.CDATA}R.isCDATA=b;function k(h){return h.type===t.ElementType.Text}R.isText=k;function x(h){return h.type===t.ElementType.Comment}R.isComment=x;function y(h){return h.type===t.ElementType.Directive}R.isDirective=y;function E(h){return h.type===t.ElementType.Root}R.isDocument=E;function w(h){return Object.prototype.hasOwnProperty.call(h,"children")}R.hasChildren=w;function j(h,d){d===void 0&&(d=!1);var m;if(k(h))m=new o(h.data);else if(x(h))m=new u(h.data);else if(f(h)){var v=d?O(h.children):[],C=new p(h.name,e({},h.attribs),v);v.forEach(function(_){return _.parent=C}),h.namespace!=null&&(C.namespace=h.namespace),h["x-attribsNamespace"]&&(C["x-attribsNamespace"]=e({},h["x-attribsNamespace"])),h["x-attribsPrefix"]&&(C["x-attribsPrefix"]=e({},h["x-attribsPrefix"])),m=C}else if(b(h)){var v=d?O(h.children):[],N=new r(v);v.forEach(function(T){return T.parent=N}),m=N}else if(E(h)){var v=d?O(h.children):[],D=new c(v);v.forEach(function(T){return T.parent=D}),h["x-mode"]&&(D["x-mode"]=h["x-mode"]),m=D}else if(y(h)){var V=new l(h.name,h.data);h["x-name"]!=null&&(V["x-name"]=h["x-name"],V["x-publicId"]=h["x-publicId"],V["x-systemId"]=h["x-systemId"]),m=V}else throw new Error("Not implemented yet: ".concat(h.type));return m.startIndex=h.startIndex,m.endIndex=h.endIndex,h.sourceCodeLocation!=null&&(m.sourceCodeLocation=h.sourceCodeLocation),m}R.cloneNode=j;function O(h){for(var d=h.map(function(v){return j(v,!0)}),m=1;m<d.length;m++)d[m].prev=d[m-1],d[m-1].next=d[m];return d}return R}var He;function ft(){return He||(He=1,function(s){var e=G&&G.__createBinding||(Object.create?function(l,i,r,c){c===void 0&&(c=r);var p=Object.getOwnPropertyDescriptor(i,r);(!p||("get"in p?!i.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(l,c,p)}:function(l,i,r,c){c===void 0&&(c=r),l[c]=i[r]}),t=G&&G.__exportStar||function(l,i){for(var r in l)r!=="default"&&!Object.prototype.hasOwnProperty.call(i,r)&&e(i,l,r)};Object.defineProperty(s,"__esModule",{value:!0}),s.DomHandler=void 0;var n=pt(),a=ze();t(ze(),s);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function l(i,r,c){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof r=="function"&&(c=r,r=o),typeof i=="object"&&(r=i,i=void 0),this.callback=i??null,this.options=r??o,this.elementCB=c??null}return l.prototype.onparserinit=function(i){this.parser=i},l.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(i){this.handleCallback(i)},l.prototype.onclosetag=function(){this.lastNode=null;var i=this.tagStack.pop();this.options.withEndIndices&&(i.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(i)},l.prototype.onopentag=function(i,r){var c=this.options.xmlMode?n.ElementType.Tag:void 0,p=new a.Element(i,r,void 0,c);this.addNode(p),this.tagStack.push(p)},l.prototype.ontext=function(i){var r=this.lastNode;if(r&&r.type===n.ElementType.Text)r.data+=i,this.options.withEndIndices&&(r.endIndex=this.parser.endIndex);else{var c=new a.Text(i);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(i){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=i;return}var r=new a.Comment(i);this.addNode(r),this.lastNode=r},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var i=new a.Text(""),r=new a.CDATA([i]);this.addNode(r),i.parent=r,this.lastNode=i},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(i,r){var c=new a.ProcessingInstruction(i,r);this.addNode(c)},l.prototype.handleCallback=function(i){if(typeof this.callback=="function")this.callback(i,this.dom);else if(i)throw i},l.prototype.addNode=function(i){var r=this.tagStack[this.tagStack.length-1],c=r.children[r.children.length-1];this.options.withStartIndices&&(i.startIndex=this.parser.startIndex),this.options.withEndIndices&&(i.endIndex=this.parser.endIndex),r.children.push(i),c&&(i.prev=c,c.next=i),i.parent=r,this.lastNode=null},l}();s.DomHandler=u,s.default=u}(G)),G}var we={},Be;function dn(){return Be||(Be=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CARRIAGE_RETURN_PLACEHOLDER_REGEX=s.CARRIAGE_RETURN_PLACEHOLDER=s.CARRIAGE_RETURN_REGEX=s.CARRIAGE_RETURN=s.CASE_SENSITIVE_TAG_NAMES_MAP=s.CASE_SENSITIVE_TAG_NAMES=void 0,s.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],s.CASE_SENSITIVE_TAG_NAMES_MAP=s.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,t){return e[t.toLowerCase()]=t,e},{}),s.CARRIAGE_RETURN="\r",s.CARRIAGE_RETURN_REGEX=new RegExp(s.CARRIAGE_RETURN,"g"),s.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now(),"__"),s.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(s.CARRIAGE_RETURN_PLACEHOLDER,"g")}(we)),we}var qe;function dt(){if(qe)return F;qe=1,Object.defineProperty(F,"__esModule",{value:!0}),F.formatAttributes=n,F.escapeSpecialCharacters=o,F.revertEscapedCharacters=u,F.formatDOM=l;var s=ft(),e=dn();function t(i){return e.CASE_SENSITIVE_TAG_NAMES_MAP[i]}function n(i){for(var r={},c=0,p=i.length;c<p;c++){var f=i[c];r[f.name]=f.value}return r}function a(i){i=i.toLowerCase();var r=t(i);return r||i}function o(i){return i.replace(e.CARRIAGE_RETURN_REGEX,e.CARRIAGE_RETURN_PLACEHOLDER)}function u(i){return i.replace(e.CARRIAGE_RETURN_PLACEHOLDER_REGEX,e.CARRIAGE_RETURN)}function l(i,r,c){r===void 0&&(r=null);for(var p=[],f,b=0,k=i.length;b<k;b++){var x=i[b];switch(x.nodeType){case 1:{var y=a(x.nodeName);f=new s.Element(y,n(x.attributes)),f.children=l(y==="template"?x.content.childNodes:x.childNodes,f);break}case 3:f=new s.Text(u(x.nodeValue));break;case 8:f=new s.Comment(x.nodeValue);break;default:continue}var E=p[b-1]||null;E&&(E.next=f),f.parent=r,f.prev=E,f.next=null,p.push(f)}return c&&(f=new s.ProcessingInstruction(c.substring(0,c.indexOf(" ")).toLowerCase(),c),f.next=p[0]||null,f.parent=r,p.unshift(f),p[1]&&(p[1].prev=p[0])),p}return F}var Fe;function gn(){if(Fe)return ce;Fe=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.default=x;var s=dt(),e="html",t="head",n="body",a=/<([a-zA-Z]+[0-9]?)/,o=/<head[^]*>/i,u=/<body[^]*>/i,l=function(y,E){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},i=function(y,E){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},r=typeof window=="object"&&window.DOMParser;if(typeof r=="function"){var c=new r,p="text/html";i=function(y,E){return E&&(y="<".concat(E,">").concat(y,"</").concat(E,">")),c.parseFromString(y,p)},l=i}if(typeof document=="object"&&document.implementation){var f=document.implementation.createHTMLDocument();l=function(y,E){if(E){var w=f.documentElement.querySelector(E);return w&&(w.innerHTML=y),f}return f.documentElement.innerHTML=y,f}}var b=typeof document=="object"&&document.createElement("template"),k;b&&b.content&&(k=function(y){return b.innerHTML=y,b.content.childNodes});function x(y){var E,w;y=(0,s.escapeSpecialCharacters)(y);var j=y.match(a),O=j&&j[1]?j[1].toLowerCase():"";switch(O){case e:{var h=i(y);if(!o.test(y)){var d=h.querySelector(t);(E=d==null?void 0:d.parentNode)===null||E===void 0||E.removeChild(d)}if(!u.test(y)){var d=h.querySelector(n);(w=d==null?void 0:d.parentNode)===null||w===void 0||w.removeChild(d)}return h.querySelectorAll(e)}case t:case n:{var m=l(y).querySelectorAll(O);return u.test(y)&&o.test(y)?m[0].parentNode.childNodes:m}default:{if(k)return k(y);var d=l(y,n).querySelector(n);return d.childNodes}}}return ce}var Ge;function mn(){if(Ge)return Z;Ge=1;var s=Z&&Z.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=a;var e=s(gn()),t=dt(),n=/<(![a-zA-Z\s]+)>/;function a(o){if(typeof o!="string")throw new TypeError("First argument must be a string");if(!o)return[];var u=o.match(n),l=u?u[1]:void 0;return(0,t.formatDOM)((0,e.default)(o),null,l)}return Z}var ue={},M={},K={},Ue;function xn(){if(Ue)return K;Ue=1;var s=0;K.SAME=s;var e=1;return K.CAMELCASE=e,K.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},K}var Xe;function bn(){if(Xe)return M;Xe=1;const s=0,e=1,t=2,n=3,a=4,o=5,u=6;function l(h){return r.hasOwnProperty(h)?r[h]:null}function i(h,d,m,v,C,N,D){this.acceptsBooleans=d===t||d===n||d===a,this.attributeName=v,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=h,this.type=d,this.sanitizeURL=N,this.removeEmptyString=D}const r={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(h=>{r[h]=new i(h,s,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([h,d])=>{r[h]=new i(h,e,!1,d,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(h=>{r[h]=new i(h,t,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(h=>{r[h]=new i(h,t,!1,h,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(h=>{r[h]=new i(h,n,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(h=>{r[h]=new i(h,n,!0,h,null,!1,!1)}),["capture","download"].forEach(h=>{r[h]=new i(h,a,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(h=>{r[h]=new i(h,u,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(h=>{r[h]=new i(h,o,!1,h.toLowerCase(),null,!1,!1)});const p=/[\-\:]([a-z])/g,f=h=>h[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(h=>{const d=h.replace(p,f);r[d]=new i(d,e,!1,h,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(h=>{const d=h.replace(p,f);r[d]=new i(d,e,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(h=>{const d=h.replace(p,f);r[d]=new i(d,e,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(h=>{r[h]=new i(h,e,!1,h.toLowerCase(),null,!1,!1)});const b="xlinkHref";r[b]=new i("xlinkHref",e,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(h=>{r[h]=new i(h,e,!1,h.toLowerCase(),null,!0,!0)});const{CAMELCASE:k,SAME:x,possibleStandardNames:y}=xn(),w=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",j=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+w+"]*$")),O=Object.keys(y).reduce((h,d)=>{const m=y[d];return m===x?h[d]=d:m===k?h[d.toLowerCase()]=d:h[d]=m,h},{});return M.BOOLEAN=n,M.BOOLEANISH_STRING=t,M.NUMERIC=o,M.OVERLOADED_BOOLEAN=a,M.POSITIVE_NUMERIC=u,M.RESERVED=s,M.STRING=e,M.getPropertyInfo=l,M.isCustomAttribute=j,M.possibleStandardNames=O,M}var J={},W={},Ee,Ve;function kn(){if(Ve)return Ee;Ve=1;var s=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,l=/^\s+|\s+$/g,i=`
`,r="/",c="*",p="",f="comment",b="declaration";Ee=function(x,y){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];y=y||{};var E=1,w=1;function j(_){var T=_.match(e);T&&(E+=T.length);var H=_.lastIndexOf(i);w=~H?_.length-H:w+_.length}function O(){var _={line:E,column:w};return function(T){return T.position=new h(_),v(),T}}function h(_){this.start=_,this.end={line:E,column:w},this.source=y.source}h.prototype.content=x;function d(_){var T=new Error(y.source+":"+E+":"+w+": "+_);if(T.reason=_,T.filename=y.source,T.line=E,T.column=w,T.source=x,!y.silent)throw T}function m(_){var T=_.exec(x);if(T){var H=T[0];return j(H),x=x.slice(H.length),T}}function v(){m(t)}function C(_){var T;for(_=_||[];T=N();)T!==!1&&_.push(T);return _}function N(){var _=O();if(!(r!=x.charAt(0)||c!=x.charAt(1))){for(var T=2;p!=x.charAt(T)&&(c!=x.charAt(T)||r!=x.charAt(T+1));)++T;if(T+=2,p===x.charAt(T-1))return d("End of comment missing");var H=x.slice(2,T-2);return w+=2,j(H),x=x.slice(T),w+=2,_({type:f,comment:H})}}function D(){var _=O(),T=m(n);if(T){if(N(),!m(a))return d("property missing ':'");var H=m(o),Ct=_({type:b,property:k(T[0].replace(s,p)),value:H?k(H[0].replace(s,p)):p});return m(u),Ct}}function V(){var _=[];C(_);for(var T;T=D();)T!==!1&&(_.push(T),C(_));return _}return v(),V()};function k(x){return x?x.replace(l,p):p}return Ee}var Ze;function yn(){if(Ze)return W;Ze=1;var s=W&&W.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(W,"__esModule",{value:!0}),W.default=t;var e=s(kn());function t(n,a){var o=null;if(!n||typeof n!="string")return o;var u=(0,e.default)(n),l=typeof a=="function";return u.forEach(function(i){if(i.type==="declaration"){var r=i.property,c=i.value;l?a(r,c,i):c&&(o=o||{},o[r]=c)}}),o}return W}var ee={},We;function vn(){if(We)return ee;We=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.camelCase=void 0;var s=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(r){return!r||t.test(r)||s.test(r)},u=function(r,c){return c.toUpperCase()},l=function(r,c){return"".concat(c,"-")},i=function(r,c){return c===void 0&&(c={}),o(r)?r:(r=r.toLowerCase(),c.reactCompat?r=r.replace(a,l):r=r.replace(n,l),r.replace(e,u))};return ee.camelCase=i,ee}var te,Ye;function wn(){if(Ye)return te;Ye=1;var s=te&&te.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},e=s(yn()),t=vn();function n(a,o){var u={};return!a||typeof a!="string"||(0,e.default)(a,function(l,i){l&&i&&(u[(0,t.camelCase)(l,o)]=i)}),u}return n.default=n,te=n,te}var Qe;function gt(){return Qe||(Qe=1,function(s){var e=J&&J.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0}),s.returnFirstArg=s.canTextBeChildOfNode=s.ELEMENTS_WITH_NO_TEXT_CHILDREN=s.PRESERVE_CUSTOM_ATTRIBUTES=void 0,s.isCustomComponent=o,s.setStyleProp=l;var t=lt(),n=e(wn()),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(c,p){return c.includes("-")?!a.has(c):!!(p&&typeof p.is=="string")}var u={reactCompat:!0};function l(c,p){if(typeof c=="string"){if(!c.trim()){p.style={};return}try{p.style=(0,n.default)(c,u)}catch{p.style={}}}}s.PRESERVE_CUSTOM_ATTRIBUTES=Number(t.version.split(".")[0])>=16,s.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var i=function(c){return!s.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(c.name)};s.canTextBeChildOfNode=i;var r=function(c){return c};s.returnFirstArg=r}(J)),J}var Ke;function mt(){if(Ke)return ue;Ke=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.default=o;var s=bn(),e=gt(),t=["checked","value"],n=["input","select","textarea"],a={reset:!0,submit:!0};function o(l,i){l===void 0&&(l={});var r={},c=!!(l.type&&a[l.type]);for(var p in l){var f=l[p];if((0,s.isCustomAttribute)(p)){r[p]=f;continue}var b=p.toLowerCase(),k=u(b);if(k){var x=(0,s.getPropertyInfo)(k);switch(t.includes(k)&&n.includes(i)&&!c&&(k=u("default"+b)),r[k]=f,x&&x.type){case s.BOOLEAN:r[k]=!0;break;case s.OVERLOADED_BOOLEAN:f===""&&(r[k]=!0);break}continue}e.PRESERVE_CUSTOM_ATTRIBUTES&&(r[p]=f)}return(0,e.setStyleProp)(l.style,r),r}function u(l){return s.possibleStandardNames[l]}return ue}var Y={},Je;function En(){if(Je)return Y;Je=1;var s=Y&&Y.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=o;var e=lt(),t=s(mt()),n=gt(),a={cloneElement:e.cloneElement,createElement:e.createElement,isValidElement:e.isValidElement};function o(l,i){i===void 0&&(i={});for(var r=[],c=typeof i.replace=="function",p=i.transform||n.returnFirstArg,f=i.library||a,b=f.cloneElement,k=f.createElement,x=f.isValidElement,y=l.length,E=0;E<y;E++){var w=l[E];if(c){var j=i.replace(w,E);if(x(j)){y>1&&(j=b(j,{key:j.key||E})),r.push(p(j,w,E));continue}}if(w.type==="text"){var O=!w.data.trim().length;if(O&&w.parent&&!(0,n.canTextBeChildOfNode)(w.parent)||i.trim&&O)continue;r.push(p(w.data,w,E));continue}var h=w,d={};u(h)?((0,n.setStyleProp)(h.attribs.style,h.attribs),d=h.attribs):h.attribs&&(d=(0,t.default)(h.attribs,h.name));var m=void 0;switch(w.type){case"script":case"style":w.children[0]&&(d.dangerouslySetInnerHTML={__html:w.children[0].data});break;case"tag":w.name==="textarea"&&w.children[0]?d.defaultValue=w.children[0].data:w.children&&w.children.length&&(m=o(w.children,i));break;default:continue}y>1&&(d.key=E),r.push(p(k(w.name,d,m),w,E))}return r.length===1?r[0]:r}function u(l){return n.PRESERVE_CUSTOM_ATTRIBUTES&&l.type==="tag"&&(0,n.isCustomComponent)(l.name,l.attribs)}return Y}var et;function Rn(){return et||(et=1,function(s){var e=Q&&Q.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0}),s.htmlToDOM=s.domToReact=s.attributesToProps=s.Text=s.ProcessingInstruction=s.Element=s.Comment=void 0,s.default=l;var t=e(mn());s.htmlToDOM=t.default;var n=e(mt());s.attributesToProps=n.default;var a=e(En());s.domToReact=a.default;var o=ft();Object.defineProperty(s,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(s,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(s,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(s,"Text",{enumerable:!0,get:function(){return o.Text}});var u={lowerCaseAttributeNames:!1};function l(i,r){if(typeof i!="string")throw new TypeError("First argument must be a string");return i?(0,a.default)((0,t.default)(i,(r==null?void 0:r.htmlparser2)||u),r):[]}}(Q)),Q}var Tn=Rn();const tt=Pt(Tn),Cn=tt.default||tt;function _e(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let X=_e();function xt(s){X=s}const ie={exec:()=>null};function A(s,e=""){let t=typeof s=="string"?s:s.source;const n={replace:(a,o)=>{let u=typeof o=="string"?o:o.source;return u=u.replace(L.caret,"$1"),t=t.replace(a,u),n},getRegex:()=>new RegExp(t,e)};return n}const L={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},_n=/^(?:[ \t]*(?:\n|$))+/,Sn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,An=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,oe=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,In=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bt=/(?:[*+-]|\d{1,9}[.)])/,kt=A(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,bt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Se=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pn=/^[^\n]+/,Ae=/(?!\s*\])(?:\\.|[^\[\]\\])+/,jn=A(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ae).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Nn=A(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bt).getRegex(),me="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ie=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,On=A("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ie).replace("tag",me).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),yt=A(Se).replace("hr",oe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex(),Ln=A(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",yt).getRegex(),Pe={blockquote:Ln,code:Sn,def:jn,fences:An,heading:In,hr:oe,html:On,lheading:kt,list:Nn,newline:_n,paragraph:yt,table:ie,text:Pn},nt=A("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",oe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex(),Dn={...Pe,table:nt,paragraph:A(Se).replace("hr",oe).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",nt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex()},Mn={...Pe,html:A(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ie).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ie,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:A(Se).replace("hr",oe).replace("heading",` *#{1,6} *[^
]`).replace("lheading",kt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},vt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$n=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,wt=/^( {2,}|\\)\n(?!\s*$)/,zn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,xe=/[\p{P}\p{S}]/u,je=/[\s\p{P}\p{S}]/u,Et=/[^\s\p{P}\p{S}]/u,Hn=A(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,je).getRegex(),Bn=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,qn=A(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,xe).getRegex(),Fn=A("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,Et).replace(/punctSpace/g,je).replace(/punct/g,xe).getRegex(),Gn=A("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Et).replace(/punctSpace/g,je).replace(/punct/g,xe).getRegex(),Un=A(/\\(punct)/,"gu").replace(/punct/g,xe).getRegex(),Xn=A(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Vn=A(Ie).replace("(?:-->|$)","-->").getRegex(),Zn=A("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Vn).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),fe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Wn=A(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",fe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Rt=A(/^!?\[(label)\]\[(ref)\]/).replace("label",fe).replace("ref",Ae).getRegex(),Tt=A(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ae).getRegex(),Yn=A("reflink|nolink(?!\\()","g").replace("reflink",Rt).replace("nolink",Tt).getRegex(),Ne={_backpedal:ie,anyPunctuation:Un,autolink:Xn,blockSkip:Bn,br:wt,code:$n,del:ie,emStrongLDelim:qn,emStrongRDelimAst:Fn,emStrongRDelimUnd:Gn,escape:vt,link:Wn,nolink:Tt,punctuation:Hn,reflink:Rt,reflinkSearch:Yn,tag:Zn,text:zn,url:ie},Qn={...Ne,link:A(/^!?\[(label)\]\((.*?)\)/).replace("label",fe).getRegex(),reflink:A(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fe).getRegex()},Te={...Ne,escape:A(vt).replace("])","~|])").getRegex(),url:A(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Kn={...Te,br:A(wt).replace("{2,}","*").getRegex(),text:A(Te.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},he={normal:Pe,gfm:Dn,pedantic:Mn},ne={normal:Ne,gfm:Te,breaks:Kn,pedantic:Qn},Jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rt=s=>Jn[s];function B(s,e){if(e){if(L.escapeTest.test(s))return s.replace(L.escapeReplace,rt)}else if(L.escapeTestNoEncode.test(s))return s.replace(L.escapeReplaceNoEncode,rt);return s}function it(s){try{s=encodeURI(s).replace(L.percentDecode,"%")}catch{return null}return s}function st(s,e){var o;const t=s.replace(L.findPipe,(u,l,i)=>{let r=!1,c=l;for(;--c>=0&&i[c]==="\\";)r=!r;return r?"|":" |"}),n=t.split(L.splitPipe);let a=0;if(n[0].trim()||n.shift(),n.length>0&&!((o=n.at(-1))!=null&&o.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(L.slashPipe,"|");return n}function re(s,e,t){const n=s.length;if(n===0)return"";let a=0;for(;a<n&&s.charAt(n-a-1)===e;)a++;return s.slice(0,n-a)}function er(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function at(s,e,t,n,a){const o=e.href,u=e.title||null,l=s[1].replace(a.other.outputLinkReplace,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const i={type:"link",raw:t,href:o,title:u,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,i}return{type:"image",raw:t,href:o,title:u,text:l}}function tr(s,e,t){const n=s.match(t.other.indentCodeCompensation);if(n===null)return e;const a=n[1];return e.split(`
`).map(o=>{const u=o.match(t.other.beginningSpace);if(u===null)return o;const[l]=u;return l.length>=a.length?o.slice(a.length):o}).join(`
`)}class de{constructor(e){I(this,"options");I(this,"rules");I(this,"lexer");this.options=e||X}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:re(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],a=tr(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:a}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const a=re(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:re(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=re(t[0],`
`).split(`
`),a="",o="";const u=[];for(;n.length>0;){let l=!1;const i=[];let r;for(r=0;r<n.length;r++)if(this.rules.other.blockquoteStart.test(n[r]))i.push(n[r]),l=!0;else if(!l)i.push(n[r]);else break;n=n.slice(r);const c=i.join(`
`),p=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${c}`:c,o=o?`${o}
${p}`:p;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,u,!0),this.lexer.state.top=f,n.length===0)break;const b=u.at(-1);if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){const k=b,x=k.raw+`
`+n.join(`
`),y=this.blockquote(x);u[u.length-1]=y,a=a.substring(0,a.length-k.raw.length)+y.raw,o=o.substring(0,o.length-k.text.length)+y.text;break}else if((b==null?void 0:b.type)==="list"){const k=b,x=k.raw+`
`+n.join(`
`),y=this.list(x);u[u.length-1]=y,a=a.substring(0,a.length-b.raw.length)+y.raw,o=o.substring(0,o.length-k.raw.length)+y.raw,n=x.substring(u.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:u,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const a=n.length>1,o={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");const u=this.rules.other.listItemRegex(n);let l=!1;for(;e;){let r=!1,c="",p="";if(!(t=u.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,w=>" ".repeat(3*w.length)),b=e.split(`
`,1)[0],k=!f.trim(),x=0;if(this.options.pedantic?(x=2,p=f.trimStart()):k?x=t[1].length+1:(x=t[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,p=f.slice(x),x+=t[1].length),k&&this.rules.other.blankLine.test(b)&&(c+=b+`
`,e=e.substring(b.length+1),r=!0),!r){const w=this.rules.other.nextBulletRegex(x),j=this.rules.other.hrRegex(x),O=this.rules.other.fencesBeginRegex(x),h=this.rules.other.headingBeginRegex(x),d=this.rules.other.htmlBeginRegex(x);for(;e;){const m=e.split(`
`,1)[0];let v;if(b=m,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),v=b):v=b.replace(this.rules.other.tabCharGlobal,"    "),O.test(b)||h.test(b)||d.test(b)||w.test(b)||j.test(b))break;if(v.search(this.rules.other.nonSpaceChar)>=x||!b.trim())p+=`
`+v.slice(x);else{if(k||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||O.test(f)||h.test(f)||j.test(f))break;p+=`
`+b}!k&&!b.trim()&&(k=!0),c+=m+`
`,e=e.substring(m.length+1),f=v.slice(x)}}o.loose||(l?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(l=!0));let y=null,E;this.options.gfm&&(y=this.rules.other.listIsTask.exec(p),y&&(E=y[0]!=="[ ] ",p=p.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:c,task:!!y,checked:E,loose:!1,text:p,tokens:[]}),o.raw+=c}const i=o.items.at(-1);i&&(i.raw=i.raw.trimEnd(),i.text=i.text.trimEnd()),o.raw=o.raw.trimEnd();for(let r=0;r<o.items.length;r++)if(this.lexer.state.top=!1,o.items[r].tokens=this.lexer.blockTokens(o.items[r].text,[]),!o.loose){const c=o.items[r].tokens.filter(f=>f.type==="space"),p=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=p}if(o.loose)for(let r=0;r<o.items.length;r++)o.items[r].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:a,title:o}}}table(e){var l;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=st(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(l=t[3])!=null&&l.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],u={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===a.length){for(const i of a)this.rules.other.tableAlignRight.test(i)?u.align.push("right"):this.rules.other.tableAlignCenter.test(i)?u.align.push("center"):this.rules.other.tableAlignLeft.test(i)?u.align.push("left"):u.align.push(null);for(let i=0;i<n.length;i++)u.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:u.align[i]});for(const i of o)u.rows.push(st(i,u.header.length).map((r,c)=>({text:r,tokens:this.lexer.inline(r),header:!1,align:u.align[c]})));return u}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const u=re(n.slice(0,-1),"\\");if((n.length-u.length)%2===0)return}else{const u=er(t[2],"()");if(u>-1){const i=(t[0].indexOf("!")===0?5:4)+t[1].length+u;t[2]=t[2].substring(0,u),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let a=t[2],o="";if(this.options.pedantic){const u=this.rules.other.pedanticHrefTitle.exec(a);u&&(a=u[1],o=u[3])}else o=t[3]?t[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),at(t,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[a.toLowerCase()];if(!o){const u=n[0].charAt(0);return{type:"text",raw:u,text:u}}return at(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let a=this.rules.inline.emStrongLDelim.exec(e);if(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(a[1]||a[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const u=[...a[0]].length-1;let l,i,r=u,c=0;const p=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+u);(a=p.exec(t))!=null;){if(l=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!l)continue;if(i=[...l].length,a[3]||a[4]){r+=i;continue}else if((a[5]||a[6])&&u%3&&!((u+i)%3)){c+=i;continue}if(r-=i,r>0)continue;i=Math.min(i,i+r+c);const f=[...a[0]][0].length,b=e.slice(0,u+a.index+f+i);if(Math.min(u,i)%2){const x=b.slice(1,-1);return{type:"em",raw:b,text:x,tokens:this.lexer.inlineTokens(x)}}const k=b.slice(2,-2);return{type:"strong",raw:b,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const a=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,a;return t[2]==="@"?(n=t[1],a="mailto:"+n):(n=t[1],a=n),{type:"link",raw:t[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let a,o;if(t[2]==="@")a=t[0],o="mailto:"+a;else{let u;do u=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(u!==t[0]);a=t[0],t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:a,href:o,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}}class ${constructor(e){I(this,"tokens");I(this,"options");I(this,"state");I(this,"tokenizer");I(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||X,this.options.tokenizer=this.options.tokenizer||new de,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:L,block:he.normal,inline:ne.normal};this.options.pedantic?(t.block=he.pedantic,t.inline=ne.pedantic):this.options.gfm&&(t.block=he.gfm,this.options.breaks?t.inline=ne.breaks:t.inline=ne.gfm),this.tokenizer.rules=t}static get rules(){return{block:he,inline:ne}}static lex(e,t){return new $(t).lex(e)}static lexInline(e,t){return new $(t).inlineTokens(e)}lex(e){e=e.replace(L.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var a,o,u;for(this.options.pedantic&&(e=e.replace(L.tabCharGlobal,"    ").replace(L.spaceLine,""));e;){let l;if((o=(a=this.options.extensions)==null?void 0:a.block)!=null&&o.some(r=>(l=r.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.space(e)){e=e.substring(l.raw.length);const r=t.at(-1);l.raw.length===1&&r!==void 0?r.raw+=`
`:t.push(l);continue}if(l=this.tokenizer.code(e)){e=e.substring(l.raw.length);const r=t.at(-1);(r==null?void 0:r.type)==="paragraph"||(r==null?void 0:r.type)==="text"?(r.raw+=`
`+l.raw,r.text+=`
`+l.text,this.inlineQueue.at(-1).src=r.text):t.push(l);continue}if(l=this.tokenizer.fences(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.heading(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.hr(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.blockquote(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.list(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.html(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.def(e)){e=e.substring(l.raw.length);const r=t.at(-1);(r==null?void 0:r.type)==="paragraph"||(r==null?void 0:r.type)==="text"?(r.raw+=`
`+l.raw,r.text+=`
`+l.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.lheading(e)){e=e.substring(l.raw.length),t.push(l);continue}let i=e;if((u=this.options.extensions)!=null&&u.startBlock){let r=1/0;const c=e.slice(1);let p;this.options.extensions.startBlock.forEach(f=>{p=f.call({lexer:this},c),typeof p=="number"&&p>=0&&(r=Math.min(r,p))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(this.state.top&&(l=this.tokenizer.paragraph(i))){const r=t.at(-1);n&&(r==null?void 0:r.type)==="paragraph"?(r.raw+=`
`+l.raw,r.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(l),n=i.length!==e.length,e=e.substring(l.raw.length);continue}if(l=this.tokenizer.text(e)){e=e.substring(l.raw.length);const r=t.at(-1);(r==null?void 0:r.type)==="text"?(r.raw+=`
`+l.raw,r.text+=`
`+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(l);continue}if(e){const r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var l,i,r;let n=e,a=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o=!1,u="";for(;e;){o||(u=""),o=!1;let c;if((i=(l=this.options.extensions)==null?void 0:l.inline)!=null&&i.some(f=>(c=f.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const f=t.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,n,u)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let p=e;if((r=this.options.extensions)!=null&&r.startInline){let f=1/0;const b=e.slice(1);let k;this.options.extensions.startInline.forEach(x=>{k=x.call({lexer:this},b),typeof k=="number"&&k>=0&&(f=Math.min(f,k))}),f<1/0&&f>=0&&(p=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(p)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(u=c.raw.slice(-1)),o=!0;const f=t.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}}class ge{constructor(e){I(this,"options");I(this,"parser");this.options=e||X}space(e){return""}code({text:e,lang:t,escaped:n}){var u;const a=(u=(t||"").match(L.notSpaceStart))==null?void 0:u[0],o=e.replace(L.endingNewline,"")+`
`;return a?'<pre><code class="language-'+B(a)+'">'+(n?o:B(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:B(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let a="";for(let l=0;l<e.items.length;l++){const i=e.items[l];a+=this.listitem(i)}const o=t?"ol":"ul",u=t&&n!==1?' start="'+n+'"':"";return"<"+o+u+`>
`+a+"</"+o+`>
`}listitem(e){var n;let t="";if(e.task){const a=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=a+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=a+" "+B(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):t+=a+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let a="";for(let o=0;o<e.rows.length;o++){const u=e.rows[o];n="";for(let l=0;l<u.length;l++)n+=this.tablecell(u[l]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+a+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${B(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const a=this.parser.parseInline(n),o=it(e);if(o===null)return a;e=o;let u='<a href="'+e+'"';return t&&(u+=' title="'+B(t)+'"'),u+=">"+a+"</a>",u}image({href:e,title:t,text:n}){const a=it(e);if(a===null)return B(n);e=a;let o=`<img src="${e}" alt="${n}"`;return t&&(o+=` title="${B(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:B(e.text)}}class Oe{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class z{constructor(e){I(this,"options");I(this,"renderer");I(this,"textRenderer");this.options=e||X,this.options.renderer=this.options.renderer||new ge,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Oe}static parse(e,t){return new z(t).parse(e)}static parseInline(e,t){return new z(t).parseInline(e)}parse(e,t=!0){var a,o;let n="";for(let u=0;u<e.length;u++){const l=e[u];if((o=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&o[l.type]){const r=l,c=this.options.extensions.renderers[r.type].call({parser:this},r);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(r.type)){n+=c||"";continue}}const i=l;switch(i.type){case"space":{n+=this.renderer.space(i);continue}case"hr":{n+=this.renderer.hr(i);continue}case"heading":{n+=this.renderer.heading(i);continue}case"code":{n+=this.renderer.code(i);continue}case"table":{n+=this.renderer.table(i);continue}case"blockquote":{n+=this.renderer.blockquote(i);continue}case"list":{n+=this.renderer.list(i);continue}case"html":{n+=this.renderer.html(i);continue}case"paragraph":{n+=this.renderer.paragraph(i);continue}case"text":{let r=i,c=this.renderer.text(r);for(;u+1<e.length&&e[u+1].type==="text";)r=e[++u],c+=`
`+this.renderer.text(r);t?n+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):n+=c;continue}default:{const r='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}parseInline(e,t=this.renderer){var a,o;let n="";for(let u=0;u<e.length;u++){const l=e[u];if((o=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&o[l.type]){const r=this.options.extensions.renderers[l.type].call({parser:this},l);if(r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){n+=r||"";continue}}const i=l;switch(i.type){case"escape":{n+=t.text(i);break}case"html":{n+=t.html(i);break}case"link":{n+=t.link(i);break}case"image":{n+=t.image(i);break}case"strong":{n+=t.strong(i);break}case"em":{n+=t.em(i);break}case"codespan":{n+=t.codespan(i);break}case"br":{n+=t.br(i);break}case"del":{n+=t.del(i);break}case"text":{n+=t.text(i);break}default:{const r='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}}class se{constructor(e){I(this,"options");I(this,"block");this.options=e||X}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?$.lex:$.lexInline}provideParser(){return this.block?z.parse:z.parseInline}}I(se,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class nr{constructor(...e){I(this,"defaults",_e());I(this,"options",this.setOptions);I(this,"parse",this.parseMarkdown(!0));I(this,"parseInline",this.parseMarkdown(!1));I(this,"Parser",z);I(this,"Renderer",ge);I(this,"TextRenderer",Oe);I(this,"Lexer",$);I(this,"Tokenizer",de);I(this,"Hooks",se);this.use(...e)}walkTokens(e,t){var a,o;let n=[];for(const u of e)switch(n=n.concat(t.call(this,u)),u.type){case"table":{const l=u;for(const i of l.header)n=n.concat(this.walkTokens(i.tokens,t));for(const i of l.rows)for(const r of i)n=n.concat(this.walkTokens(r.tokens,t));break}case"list":{const l=u;n=n.concat(this.walkTokens(l.items,t));break}default:{const l=u;(o=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&o[l.type]?this.defaults.extensions.childTokens[l.type].forEach(i=>{const r=l[i].flat(1/0);n=n.concat(this.walkTokens(r,t))}):l.tokens&&(n=n.concat(this.walkTokens(l.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const u=t.renderers[o.name];u?t.renderers[o.name]=function(...l){let i=o.renderer.apply(this,l);return i===!1&&(i=u.apply(this,l)),i}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const u=t[o.level];u?u.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),a.extensions=t),n.renderer){const o=this.defaults.renderer||new ge(this.defaults);for(const u in n.renderer){if(!(u in o))throw new Error(`renderer '${u}' does not exist`);if(["options","parser"].includes(u))continue;const l=u,i=n.renderer[l],r=o[l];o[l]=(...c)=>{let p=i.apply(o,c);return p===!1&&(p=r.apply(o,c)),p||""}}a.renderer=o}if(n.tokenizer){const o=this.defaults.tokenizer||new de(this.defaults);for(const u in n.tokenizer){if(!(u in o))throw new Error(`tokenizer '${u}' does not exist`);if(["options","rules","lexer"].includes(u))continue;const l=u,i=n.tokenizer[l],r=o[l];o[l]=(...c)=>{let p=i.apply(o,c);return p===!1&&(p=r.apply(o,c)),p}}a.tokenizer=o}if(n.hooks){const o=this.defaults.hooks||new se;for(const u in n.hooks){if(!(u in o))throw new Error(`hook '${u}' does not exist`);if(["options","block"].includes(u))continue;const l=u,i=n.hooks[l],r=o[l];se.passThroughHooks.has(u)?o[l]=c=>{if(this.defaults.async)return Promise.resolve(i.call(o,c)).then(f=>r.call(o,f));const p=i.call(o,c);return r.call(o,p)}:o[l]=(...c)=>{let p=i.apply(o,c);return p===!1&&(p=r.apply(o,c)),p}}a.hooks=o}if(n.walkTokens){const o=this.defaults.walkTokens,u=n.walkTokens;a.walkTokens=function(l){let i=[];return i.push(u.call(this,l)),o&&(i=i.concat(o.call(this,l))),i}}this.defaults={...this.defaults,...a}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return $.lex(e,t??this.defaults)}parser(e,t){return z.parse(e,t??this.defaults)}parseMarkdown(e){return(n,a)=>{const o={...a},u={...this.defaults,...o},l=this.onError(!!u.silent,!!u.async);if(this.defaults.async===!0&&o.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));u.hooks&&(u.hooks.options=u,u.hooks.block=e);const i=u.hooks?u.hooks.provideLexer():e?$.lex:$.lexInline,r=u.hooks?u.hooks.provideParser():e?z.parse:z.parseInline;if(u.async)return Promise.resolve(u.hooks?u.hooks.preprocess(n):n).then(c=>i(c,u)).then(c=>u.hooks?u.hooks.processAllTokens(c):c).then(c=>u.walkTokens?Promise.all(this.walkTokens(c,u.walkTokens)).then(()=>c):c).then(c=>r(c,u)).then(c=>u.hooks?u.hooks.postprocess(c):c).catch(l);try{u.hooks&&(n=u.hooks.preprocess(n));let c=i(n,u);u.hooks&&(c=u.hooks.processAllTokens(c)),u.walkTokens&&this.walkTokens(c,u.walkTokens);let p=r(c,u);return u.hooks&&(p=u.hooks.postprocess(p)),p}catch(c){return l(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const a="<p>An error occurred:</p><pre>"+B(n.message+"",!0)+"</pre>";return t?Promise.resolve(a):a}if(t)return Promise.reject(n);throw n}}}const U=new nr;function S(s,e){return U.parse(s,e)}S.options=S.setOptions=function(s){return U.setOptions(s),S.defaults=U.defaults,xt(S.defaults),S};S.getDefaults=_e;S.defaults=X;S.use=function(...s){return U.use(...s),S.defaults=U.defaults,xt(S.defaults),S};S.walkTokens=function(s,e){return U.walkTokens(s,e)};S.parseInline=U.parseInline;S.Parser=z;S.parser=z.parse;S.Renderer=ge;S.TextRenderer=Oe;S.Lexer=$;S.lexer=$.lex;S.Tokenizer=de;S.Hooks=se;S.parse=S;S.options;S.setOptions;S.use;S.walkTokens;S.parseInline;z.parse;$.lex;const rr=({children:s,delay:e=25,onFinish:t=()=>{}})=>{const[n,a]=P.useState(0),o=P.useMemo(()=>{const i=[],r=c=>{var f;const p=(f=c==null?void 0:c.props)==null?void 0:f.children;return Array.isArray(c)&&c.forEach(b=>{typeof b=="object"?r(b):typeof b=="string"&&i.push(b.split(" ").length)}),p===void 0&&typeof c=="string"&&i.push(c.split(" ").length),typeof p=="object"&&r(p),typeof p=="string"&&i.push(p.split(" ").length),i};return r(s)},[s]),u=P.useMemo(()=>o.reduce((i,r)=>i+r,0),[o]),l=P.useMemo(()=>{let i=0,r=0;const c=p=>{var b;if(i>n)return null;const f=(b=p==null?void 0:p.props)==null?void 0:b.children;if(Array.isArray(p)){const k=[];return p.forEach(x=>{if(typeof x=="object")k.push(c(x));else if(typeof x=="string"){i+=x.split(" ").length,r++;const[y,E]=ye(o,n);y<r&&k.push(x.slice(0,ke(x," ",E))),k.push(x)}}),k}if(f===void 0&&typeof p=="string"){i+=p.split(" ").length,r++;const[k,x]=ye(o,n);return k<r?p.slice(0,ke(p," ",x)):p}if(typeof f=="object")return P.createElement(p.type,p==null?void 0:p.props,c(f));if(typeof f=="string"){i+=f.split(" ").length,r++;const[k,x]=ye(o,n);return k<r?P.createElement(p.type,p==null?void 0:p.props,f.slice(0,ke(f," ",x))):p}};return c(s)},[s,n,o]);return fn(()=>{a(i=>(i+1>=u&&t(),i+1))},u>n?e:null),P.useEffect(()=>{a(0)},[s]),l},ir=({content:s="",triggerTyping:e,onFinish:t})=>{const n=g.jsx("div",{className:"markdown-content",children:Cn(S.parse(s,{async:!1}))});return console.log(s),g.jsx(g.Fragment,{children:e?g.jsx(rr,{onFinish:t,children:n}):n})},ot=[{label:"Not factually correct",value:"notFactuallyCorrect"},{label:"Harmful content",value:"harmfulContent"},{label:"Overeactive refusal",value:"overeactiveRefusal"},{label:"Other",value:"other"}],sr=({content:s})=>{const e=P.useRef(null),[t,n]=P.useState(!1),[a,o]=P.useState(""),[u,l]=P.useState(""),[i,r]=P.useState({type:"",open:!1}),c="p-2 rounded-full hover:bg-black/5 hover:text-gray-900 dark:hover:text-gray-100 dark:hover:bg-opacity/40 transition-colors duration-300 ease-in-out";P.useEffect(()=>{if(t&&s){if(!navigator.clipboard){console.error("Clipboard API không được hỗ trợ trên trình duyệt này! Dùng execCommand để sao chép.");const k=document.createElement("textarea");k.value=s,document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k);const x=setTimeout(()=>n(!1),2e3);return()=>clearTimeout(x)}navigator.clipboard.writeText(s).then(()=>{}).catch(k=>{console.error("Lỗi khi sao chép:",k)});const b=setTimeout(()=>n(!1),2e3);return()=>clearTimeout(b)}},[t,s]);const p=()=>{r({type:"",open:!1})},f=()=>{l(i.type),p(),Ft.push(g.jsx(Gt,{type:"success",children:"Thanks for your feedback!"}),{placement:"top-center"})};return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex mt-0.5",children:g.jsx(Kt,{title:t?"Copied":"Copy",placement:"bottom",children:g.jsx("button",{className:q(c,"text-lg"),onClick:()=>n(!0),children:t?g.jsx(Ht,{className:"text-emerald-500"}):g.jsx(Bt,{})})})}),g.jsxs(ut,{isOpen:i.open,onClose:p,onRequestClose:p,children:[g.jsx("h5",{className:"mb-4",children:"Feedback"}),g.jsxs(ct,{onSubmit:f,children:[i.type==="praise"&&g.jsx(pe,{label:"Please provide details: (optional)",children:g.jsx(Re,{ref:e,textArea:!0,placeholder:"What was statifying about this response?"})}),i.type==="blame"&&g.jsxs(g.Fragment,{children:[g.jsx(pe,{label:"What type of issue do you wish to report? (optional)",children:g.jsx(Wt,{options:ot,value:ot.filter(b=>b.value===a),onChange:b=>o((b==null?void 0:b.value)||"")})}),g.jsx(pe,{label:"Please provide details: (optional)",children:g.jsx(Re,{ref:e,textArea:!0,placeholder:"What was unstatifying about this response?"})})]})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(ae,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",type:"button",onClick:p,children:"Cancel"}),g.jsx(ae,{variant:"solid",type:"submit",onClick:f,children:"Submit"})]})]})]})},ar=()=>{const s=P.useRef(null),{selectedConversation:e,chatHistory:t,isTyping:n,disabledChatFresh:a}=Ce(),{handleSend:o}=ht(),[u,l]=P.useState(!1),i=()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)};P.useEffect(()=>{i()},[e,t]);const r=P.useMemo(()=>{const f=t.find(b=>b.id===e);return(f==null?void 0:f.conversation)||[]},[e,t]),c=async({value:f})=>{n||u||f.trim()&&(l(!0),await o(f))},p=f=>{a(f),i(),l(!1)};return g.jsx(jt,{className:"flex-1 h-full",bodyClass:"h-full",children:g.jsx(on,{ref:s,messageList:r,placeholder:"Nhập tin nhắn ở đây",showMessageList:!!e,showAvatar:!0,avatarGap:!0,containerClass:"h-[calc(100%-30px)] xl:h-full",messageListClass:"h-[calc(100%-100px)] xl:h-[calc(100%-70px)]",disabled:u||n,typing:n?{id:"ai",name:"Chat AI",avatarImageUrl:"/img/thumbs/ai.jpg"}:!1,customRenderer:f=>f.sender.id==="ai"?g.jsx(ir,{content:f.content,triggerTyping:f.fresh?f.fresh:!1,onFinish:()=>p(f.id)}):f.content,customAction:f=>f.sender.id==="ai"?g.jsx(sr,{content:f.content}):null,onInputChange:c,children:!e&&g.jsx(pn,{})})})},or=Le.object({title:Le.string().min(1,"Please do not leave chat title blank!")}),lr=()=>{var r;const{renameDialog:s,setRenameDialog:e,setChatHistoryName:t}=Ce(),{control:n,formState:{errors:a},handleSubmit:o,reset:u}=Yt({defaultValues:{title:s.title},resolver:Jt(or)});P.useEffect(()=>{s.open&&u({title:s.title})},[s.title,s.open]);const l=()=>{e({id:"",title:"",open:!1})},i=async({title:c})=>{t({id:s.id,title:c}),l()};return g.jsxs(ut,{isOpen:s.open,onClose:l,onRequestClose:l,children:[g.jsx("h5",{children:"Rename chat"}),g.jsx("div",{className:"mt-8",children:g.jsxs(ct,{onSubmit:o(i),children:[g.jsx(pe,{label:"Chat title",invalid:!!a.title,errorMessage:(r=a.title)==null?void 0:r.message,children:g.jsx(Qt,{name:"title",control:n,rules:{required:!0},render:({field:c})=>g.jsx(Re,{placeholder:"Rename chat",type:"text",autoComplete:"off",...c})})}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(ae,{type:"button",onClick:l,children:"Cancel"}),g.jsx(ae,{variant:"solid",type:"submit",children:"Rename"})]})]})})]})},qr=()=>{const{larger:s}=Ot();return g.jsx("div",{className:"h-full",children:g.jsxs("div",{className:"flex flex-auto gap-4 h-full",children:[g.jsx(ar,{}),s.xl,g.jsx(lr,{})]})})};export{qr as default};
