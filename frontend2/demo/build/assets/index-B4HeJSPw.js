import{r as b,j as s,E as N,c as k,u as C}from"./index-DtwSxASm.js";import{u as E,A as P}from"./useTimeOutMessage-CylvASWg.js";import{I as w}from"./Input-BNk8Jtou.js";import{B as F}from"./Button-i5g00eBi.js";import{u as A,F as B,a as f,C as j}from"./index.esm-Cn3F_1Fv.js";import{j as M,k as H}from"./index-CHU72eNV.js";import{t as O,z as p}from"./index-DNuGD4fr.js";import{A as T}from"./ActionLink-rgSc-yxd.js";import"./classNames-ePRZs5sB.js";import"./StatusIcon-C3ptiLRj.js";import"./CloseButton-C-zx-kDW.js";import"./proxy-CApU-jHi.js";import"./context-DPxwjVT1.js";import"./isNil-BVBaoyN1.js";const q=n=>{const{onVisibleChange:e,ref:t,...o}=n,[r,i]=b.useState("password"),m=d=>{d.preventDefault();const a=r==="password"?"text":"password";i(a),e==null||e(a==="text")};return s.jsx(w,{...o,ref:t,type:r,suffix:s.jsx("span",{className:"cursor-pointer select-none text-xl",role:"button",onClick:m,children:r==="password"?s.jsx(M,{}):s.jsx(H,{})})})},V=p.object({email:p.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:p.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),_=n=>{var x,h,g;const[e,t]=b.useState(!1),{disableSubmit:o=!1,className:r,setMessage:i,passwordHint:m}=n,{handleSubmit:d,formState:{errors:a},control:u}=A({defaultValues:{email:"admin@gmail.com",password:"admin"},resolver:O(V)}),{signIn:y}=N(),S=async l=>{const{email:v,password:I}=l;if(!o){t(!0);const c=await y({email:v,password:I});(c==null?void 0:c.status)==="failed"&&(i==null||i(c.message))}t(!1)};return s.jsx("div",{className:r,children:s.jsxs(B,{onSubmit:d(S),children:[s.jsx(f,{label:"Email",invalid:!!a.email,errorMessage:(x=a.email)==null?void 0:x.message,children:s.jsx(j,{name:"email",control:u,render:({field:l})=>s.jsx(w,{type:"email",placeholder:"Email",autoComplete:"off",...l})})}),s.jsx(f,{label:"Mật khẩu",invalid:!!a.password,errorMessage:(h=a.password)==null?void 0:h.message,className:k(m?"mb-0":"",(g=a.password)!=null&&g.message?"mb-8":""),children:s.jsx(j,{name:"password",control:u,rules:{required:!0},render:({field:l})=>s.jsx(q,{type:"text",placeholder:"Mật khẩu",autoComplete:"off",...l})})}),m,s.jsx(F,{block:!0,loading:e,variant:"solid",type:"submit",children:e?"Đăng nhập vào...":"Đăng nhập"})]})})},z=({signUpUrl:n="/sign-up",disableSubmit:e})=>{const[t,o]=E();return C(r=>r.mode),s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-10",children:[s.jsx("h2",{className:"mb-2",children:"Xin chào!"}),s.jsx("p",{className:"font-semibold heading-text",children:"Vui lòng nhập thông tin đăng nhập của bạn để đăng nhập!"})]}),t&&s.jsx(P,{showIcon:!0,className:"mb-4",type:"danger",children:s.jsx("span",{className:"break-all",children:t})}),s.jsx(_,{disableSubmit:e,setMessage:o,passwordHint:s.jsx("div",{className:"mb-7 mt-2"})}),s.jsx("div",{children:s.jsxs("div",{className:"mt-6 text-center",children:[s.jsxs("span",{children:["Chưa có tài khoản?"," "]}),s.jsx(T,{to:n,className:"heading-text font-bold",themeColor:!1,children:"Đăng ký"})]})})]})},es=()=>s.jsx(z,{});export{z as SignInBase,es as default};
