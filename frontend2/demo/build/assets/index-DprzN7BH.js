import{j as x,$ as Be,r as X,c as ye,g as te,D as Ce,B as ke}from"./index-DtwSxASm.js";import{C as De}from"./Card-CvsXYMKX.js";import{B as we}from"./Button-i5g00eBi.js";import{c as ce}from"./classNames-ePRZs5sB.js";import{c as Te}from"./AccontsService-BZEQNtVZ.js";import{i as Ne}from"./isLastChild-BgvHfb_g.js";import{u as Ee}from"./useQuery-C3PaupPY.js";import{u as Me}from"./index-BwWjUWmm.js";import{N as be}from"./react-number-format.es-Cj5ZwSfX.js";import{e as de}from"./index-DYfuKO4A.js";import{C as K}from"./index-BjgA-DNM.js";import{S as ie}from"./index-Bf9J6wto.js";import{D as Pe}from"./Dialog-CFE4-9zb.js";import{s as Se}from"./sleep-BvINh1mj.js";import"./context-DPxwjVT1.js";import"./useControllableState-CPNazxRZ.js";import"./index-DwHWSaNy.js";import"./index-Chjiymov.js";import"./CloseButton-C-zx-kDW.js";import"./index-CHU72eNV.js";import"./proxy-CApU-jHi.js";const Ie=U=>{const{className:L,children:J,prefix:S,ref:E,suffix:I,prefixClass:M,suffixClass:P,...B}=U;return x.jsxs("div",{ref:E,className:ce("tag","bg-gray-100 dark:bg-gray-700 border-gray-100 dark:border-gray-700 text-gray-900 dark:text-gray-50",L),...B,children:[S&&typeof S=="boolean"&&x.jsx("span",{className:ce("tag-affix tag-prefix",M)}),typeof S=="object"&&S,J,I&&typeof I=="boolean"&&x.jsx("span",{className:ce("tag-affix tag-suffix",P)}),typeof I=="object"&&I]})},je={paymentCycle:"monthly",paymentDialog:!1,selectedPlan:{}},ve=Be(U=>({...je,setPaymentCycle:L=>U(()=>({paymentCycle:L})),setPaymentDialog:L=>U(()=>({paymentDialog:L})),setSelectedPlan:L=>U(()=>({selectedPlan:L}))})),le="FMSdarBAdtoan",Le="http://103.97.127.14:3000",Re=()=>{const[U,L]=X.useState([]),{paymentCycle:J,setPaymentDialog:S,setSelectedPlan:E}=ve(),I=Ee(),M=I.get("subcription"),P=I.get("cycle"),B=w=>{localStorage.setItem("begin",K.AES.encrypt(w.price.monthly.toString(),le).toString()),localStorage.setItem("beginid",K.AES.encrypt(w.id,le).toString())},{data:O}=Me(["/api/pricing"],()=>Te(),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1});X.useEffect(()=>{sessionStorage.getItem("hasReloadedsPricing")||(sessionStorage.setItem("hasReloadedsPricing","true"),window.location.reload())},[]),X.useEffect(()=>{sessionStorage.getItem("hasReloaded")||(sessionStorage.setItem("hasReloaded","true"),window.location.reload()),(async()=>{const C=localStorage.getItem("token");try{const $=await te.get(`${Le}/packages/packages`,{headers:{Authorization:`Bearer ${C}`}});L($.data)}catch($){console.log($)}})()},[]);const F=w=>{const D=U.find(C=>C.id===w);return D?D.day:"N/A"},V={};if(O&&O.plans){var W=localStorage.getItem("role");W&&(W=K.AES.decrypt(W,le).toString(K.enc.Utf8));var re=O.plans;W!=="admin"&&(re=O.plans.filter(w=>w.id!=="trial_package")),O.plans=re,re.forEach(w=>{const D=w.description.match(/\[(.*?)\]/);if(!D)return;let C=D[1].trim();C=C.replace(/([{,]\s*)(\w+)\s*:/g,'$1"$2":').replace(/:\s*'([^']*)'/g,': "$1"'),JSON.parse(`[${C}]`).forEach(G=>{const{id:H,description:v}=G;V[H]||(V[H]={id:H,description:{}}),V[H].description[w.id]=v})})}const k=w=>w.split(/(\[[^\]]+\])/)[0].trim();return x.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 xl:gap-4",children:O==null?void 0:O.plans.map((w,D)=>x.jsxs("div",{className:ye("px-6 pt-2 flex flex-col justify-between",!Ne(O.plans,D)&&"border-r-0 xl:border-r border-gray-200 dark:border-gray-700"),children:[x.jsxs("div",{children:[x.jsxs("h5",{className:"mb-6 flex items-center gap-2",children:[x.jsxs("span",{children:[w.name," "]}),w.recommended&&x.jsx(Ie,{className:"rounded-full bg-green-200 font-bold",children:"Recommended"})]}),x.jsxs("div",{className:"",children:[k(w.description)," -  ",w.id]}),x.jsxs("div",{className:"mt-6",children:[x.jsx(be,{className:"h1",displayType:"text",value:w.price[J],prefix:"$",thousandSeparator:!0}),x.jsxs("span",{className:"text-lg font-bold",children:[" ","/"," ",J==="monthly"?F(w.id)+" ngày":Number(F(w.id))*12+" ngày"]})]}),x.jsx("div",{className:"flex flex-col gap-4 border-t border-gray-200 dark:border-gray-700 mt-6 pt-6",children:Object.values(V).map(C=>{const $=C.description[w.id];return x.jsx("div",{className:"flex items-center gap-4 font-semibold heading-text",children:w.features.includes(C.id)&&$&&x.jsxs(x.Fragment,{children:[x.jsx(de,{className:"text-2xl text-primary"}),x.jsx("span",{children:$})]})},C.id)})})]}),x.jsx("div",{className:"mt-10",children:x.jsx(we,{block:!0,disabled:M===w.id&&P===J,onClick:()=>{E({paymentCycle:J,planName:w.name,price:w.price}),S(!0),B(w)},children:M===w.id&&P===J?"Current plan":"Chọn gói"})})]},w.id))})},Oe=()=>{const{paymentCycle:U,setPaymentCycle:L}=ve();return x.jsxs(ie,{value:U,onChange:J=>L(J),children:[x.jsx(ie.Item,{value:"monthly",children:"Tháng"}),x.jsx(ie.Item,{value:"annually",children:"Năm"})]})};var ge={exports:{}},me;function $e(){return me||(me=1,function(U,L){var J=function(){var S=function(v,p){var f=236,d=17,a=v,c=I[p],t=null,e=0,l=null,u=[],g={},A=function(n,o){e=a*4+17,t=function(r){for(var s=new Array(r),i=0;i<r;i+=1){s[i]=new Array(r);for(var h=0;h<r;h+=1)s[i][h]=null}return s}(e),_(0,0),_(e-7,0),_(0,e-7),Q(),j(),z(n,o),a>=7&&Z(n),l==null&&(l=Ae(a,c,u)),ee(l,o)},_=function(n,o){for(var r=-1;r<=7;r+=1)if(!(n+r<=-1||e<=n+r))for(var s=-1;s<=7;s+=1)o+s<=-1||e<=o+s||(0<=r&&r<=6&&(s==0||s==6)||0<=s&&s<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=s&&s<=4?t[n+r][o+s]=!0:t[n+r][o+s]=!1)},T=function(){for(var n=0,o=0,r=0;r<8;r+=1){A(!0,r);var s=P.getLostPoint(g);(r==0||n>s)&&(n=s,o=r)}return o},j=function(){for(var n=8;n<e-8;n+=1)t[n][6]==null&&(t[n][6]=n%2==0);for(var o=8;o<e-8;o+=1)t[6][o]==null&&(t[6][o]=o%2==0)},Q=function(){for(var n=P.getPatternPosition(a),o=0;o<n.length;o+=1)for(var r=0;r<n.length;r+=1){var s=n[o],i=n[r];if(t[s][i]==null)for(var h=-2;h<=2;h+=1)for(var y=-2;y<=2;y+=1)h==-2||h==2||y==-2||y==2||h==0&&y==0?t[s+h][i+y]=!0:t[s+h][i+y]=!1}},Z=function(n){for(var o=P.getBCHTypeNumber(a),r=0;r<18;r+=1){var s=!n&&(o>>r&1)==1;t[Math.floor(r/3)][r%3+e-8-3]=s}for(var r=0;r<18;r+=1){var s=!n&&(o>>r&1)==1;t[r%3+e-8-3][Math.floor(r/3)]=s}},z=function(n,o){for(var r=c<<3|o,s=P.getBCHTypeInfo(r),i=0;i<15;i+=1){var h=!n&&(s>>i&1)==1;i<6?t[i][8]=h:i<8?t[i+1][8]=h:t[e-15+i][8]=h}for(var i=0;i<15;i+=1){var h=!n&&(s>>i&1)==1;i<8?t[8][e-i-1]=h:i<9?t[8][15-i-1+1]=h:t[8][15-i-1]=h}t[e-8][8]=!n},ee=function(n,o){for(var r=-1,s=e-1,i=7,h=0,y=P.getMaskFunction(o),m=e-1;m>0;m-=2)for(m==6&&(m-=1);;){for(var N=0;N<2;N+=1)if(t[s][m-N]==null){var R=!1;h<n.length&&(R=(n[h]>>>i&1)==1);var b=y(s,m-N);b&&(R=!R),t[s][m-N]=R,i-=1,i==-1&&(h+=1,i=7)}if(s+=r,s<0||e<=s){s-=r,r=-r;break}}},ne=function(n,o){for(var r=0,s=0,i=0,h=new Array(o.length),y=new Array(o.length),m=0;m<o.length;m+=1){var N=o[m].dataCount,R=o[m].totalCount-N;s=Math.max(s,N),i=Math.max(i,R),h[m]=new Array(N);for(var b=0;b<h[m].length;b+=1)h[m][b]=255&n.getBuffer()[b+r];r+=N;var Y=P.getErrorCorrectPolynomial(R),q=O(h[m],Y.getLength()-1),he=q.mod(Y);y[m]=new Array(Y.getLength()-1);for(var b=0;b<y[m].length;b+=1){var pe=b+he.getLength()-y[m].length;y[m][b]=pe>=0?he.getAt(pe):0}}for(var xe=0,b=0;b<o.length;b+=1)xe+=o[b].totalCount;for(var ue=new Array(xe),fe=0,b=0;b<s;b+=1)for(var m=0;m<o.length;m+=1)b<h[m].length&&(ue[fe]=h[m][b],fe+=1);for(var b=0;b<i;b+=1)for(var m=0;m<o.length;m+=1)b<y[m].length&&(ue[fe]=y[m][b],fe+=1);return ue},Ae=function(n,o,r){for(var s=F.getRSBlocks(n,o),i=V(),h=0;h<r.length;h+=1){var y=r[h];i.put(y.getMode(),4),i.put(y.getLength(),P.getLengthInBits(y.getMode(),n)),y.write(i)}for(var m=0,h=0;h<s.length;h+=1)m+=s[h].dataCount;if(i.getLengthInBits()>m*8)throw"code length overflow. ("+i.getLengthInBits()+">"+m*8+")";for(i.getLengthInBits()+4<=m*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=m*8||(i.put(f,8),i.getLengthInBits()>=m*8));)i.put(d,8);return ne(i,s)};g.addData=function(n,o){o=o||"Byte";var r=null;switch(o){case"Numeric":r=W(n);break;case"Alphanumeric":r=re(n);break;case"Byte":r=k(n);break;case"Kanji":r=w(n);break;default:throw"mode:"+o}u.push(r),l=null},g.isDark=function(n,o){if(n<0||e<=n||o<0||e<=o)throw n+","+o;return t[n][o]},g.getModuleCount=function(){return e},g.make=function(){if(a<1){for(var n=1;n<40;n++){for(var o=F.getRSBlocks(n,c),r=V(),s=0;s<u.length;s++){var i=u[s];r.put(i.getMode(),4),r.put(i.getLength(),P.getLengthInBits(i.getMode(),n)),i.write(r)}for(var h=0,s=0;s<o.length;s++)h+=o[s].dataCount;if(r.getLengthInBits()<=h*8)break}a=n}A(!1,T())},g.createTableTag=function(n,o){n=n||2,o=typeof o>"u"?n*4:o;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+o+"px;",r+='">',r+="<tbody>";for(var s=0;s<g.getModuleCount();s+=1){r+="<tr>";for(var i=0;i<g.getModuleCount();i+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+n+"px;",r+=" height: "+n+"px;",r+=" background-color: ",r+=g.isDark(s,i)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>",r},g.createSvgTag=function(n,o,r,s){var i={};typeof arguments[0]=="object"&&(i=arguments[0],n=i.cellSize,o=i.margin,r=i.alt,s=i.title),n=n||2,o=typeof o>"u"?n*4:o,r=typeof r=="string"?{text:r}:r||{},r.text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,s=typeof s=="string"?{text:s}:s||{},s.text=s.text||null,s.id=s.text?s.id||"qrcode-title":null;var h=g.getModuleCount()*n+o*2,y,m,N,R,b="",Y;for(Y="l"+n+",0 0,"+n+" -"+n+",0 0,-"+n+"z ",b+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',b+=i.scalable?"":' width="'+h+'px" height="'+h+'px"',b+=' viewBox="0 0 '+h+" "+h+'" ',b+=' preserveAspectRatio="xMinYMin meet"',b+=s.text||r.text?' role="img" aria-labelledby="'+oe([s.id,r.id].join(" ").trim())+'"':"",b+=">",b+=s.text?'<title id="'+oe(s.id)+'">'+oe(s.text)+"</title>":"",b+=r.text?'<description id="'+oe(r.id)+'">'+oe(r.text)+"</description>":"",b+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',b+='<path d="',N=0;N<g.getModuleCount();N+=1)for(R=N*n+o,y=0;y<g.getModuleCount();y+=1)g.isDark(N,y)&&(m=y*n+o,b+="M"+m+","+R+Y);return b+='" stroke="transparent" fill="black"/>',b+="</svg>",b},g.createDataURL=function(n,o){n=n||2,o=typeof o>"u"?n*4:o;var r=g.getModuleCount()*n+o*2,s=o,i=r-o;return H(r,r,function(h,y){if(s<=h&&h<i&&s<=y&&y<i){var m=Math.floor((h-s)/n),N=Math.floor((y-s)/n);return g.isDark(N,m)?0:1}else return 1})},g.createImgTag=function(n,o,r){n=n||2,o=typeof o>"u"?n*4:o;var s=g.getModuleCount()*n+o*2,i="";return i+="<img",i+=' src="',i+=g.createDataURL(n,o),i+='"',i+=' width="',i+=s,i+='"',i+=' height="',i+=s,i+='"',r&&(i+=' alt="',i+=oe(r),i+='"'),i+="/>",i};var oe=function(n){for(var o="",r=0;r<n.length;r+=1){var s=n.charAt(r);switch(s){case"<":o+="&lt;";break;case">":o+="&gt;";break;case"&":o+="&amp;";break;case'"':o+="&quot;";break;default:o+=s;break}}return o},_e=function(n){var o=1;n=typeof n>"u"?o*2:n;var r=g.getModuleCount()*o+n*2,s=n,i=r-n,h,y,m,N,R,b={"██":"█","█ ":"▀"," █":"▄","  ":" "},Y={"██":"▀","█ ":"▀"," █":" ","  ":" "},q="";for(h=0;h<r;h+=2){for(m=Math.floor((h-s)/o),N=Math.floor((h+1-s)/o),y=0;y<r;y+=1)R="█",s<=y&&y<i&&s<=h&&h<i&&g.isDark(m,Math.floor((y-s)/o))&&(R=" "),s<=y&&y<i&&s<=h+1&&h+1<i&&g.isDark(N,Math.floor((y-s)/o))?R+=" ":R+="█",q+=n<1&&h+1>=i?Y[R]:b[R];q+=`
`}return r%2&&n>0?q.substring(0,q.length-r-1)+Array(r+1).join("▀"):q.substring(0,q.length-1)};return g.createASCII=function(n,o){if(n=n||1,n<2)return _e(o);n-=1,o=typeof o>"u"?n*2:o;var r=g.getModuleCount()*n+o*2,s=o,i=r-o,h,y,m,N,R=Array(n+1).join("██"),b=Array(n+1).join("  "),Y="",q="";for(h=0;h<r;h+=1){for(m=Math.floor((h-s)/n),q="",y=0;y<r;y+=1)N=1,s<=y&&y<i&&s<=h&&h<i&&g.isDark(m,Math.floor((y-s)/n))&&(N=0),q+=N?R:b;for(m=0;m<n;m+=1)Y+=q+`
`}return Y.substring(0,Y.length-1)},g.renderTo2dContext=function(n,o){o=o||2;for(var r=g.getModuleCount(),s=0;s<r;s++)for(var i=0;i<r;i++)n.fillStyle=g.isDark(s,i)?"black":"white",n.fillRect(s*o,i*o,o,o)},g};S.stringToBytesFuncs={default:function(v){for(var p=[],f=0;f<v.length;f+=1){var d=v.charCodeAt(f);p.push(d&255)}return p}},S.stringToBytes=S.stringToBytesFuncs.default,S.createStringToBytes=function(v,p){var f=function(){for(var a=$(v),c=function(){var j=a.read();if(j==-1)throw"eof";return j},t=0,e={};;){var l=a.read();if(l==-1)break;var u=c(),g=c(),A=c(),_=String.fromCharCode(l<<8|u),T=g<<8|A;e[_]=T,t+=1}if(t!=p)throw t+" != "+p;return e}(),d=63;return function(a){for(var c=[],t=0;t<a.length;t+=1){var e=a.charCodeAt(t);if(e<128)c.push(e);else{var l=f[a.charAt(t)];typeof l=="number"?(l&255)==l?c.push(l):(c.push(l>>>8),c.push(l&255)):c.push(d)}}return c}};var E={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},I={L:1,M:0,Q:3,H:2},M={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},P=function(){var v=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],p=1335,f=7973,d=21522,a={},c=function(t){for(var e=0;t!=0;)e+=1,t>>>=1;return e};return a.getBCHTypeInfo=function(t){for(var e=t<<10;c(e)-c(p)>=0;)e^=p<<c(e)-c(p);return(t<<10|e)^d},a.getBCHTypeNumber=function(t){for(var e=t<<12;c(e)-c(f)>=0;)e^=f<<c(e)-c(f);return t<<12|e},a.getPatternPosition=function(t){return v[t-1]},a.getMaskFunction=function(t){switch(t){case M.PATTERN000:return function(e,l){return(e+l)%2==0};case M.PATTERN001:return function(e,l){return e%2==0};case M.PATTERN010:return function(e,l){return l%3==0};case M.PATTERN011:return function(e,l){return(e+l)%3==0};case M.PATTERN100:return function(e,l){return(Math.floor(e/2)+Math.floor(l/3))%2==0};case M.PATTERN101:return function(e,l){return e*l%2+e*l%3==0};case M.PATTERN110:return function(e,l){return(e*l%2+e*l%3)%2==0};case M.PATTERN111:return function(e,l){return(e*l%3+(e+l)%2)%2==0};default:throw"bad maskPattern:"+t}},a.getErrorCorrectPolynomial=function(t){for(var e=O([1],0),l=0;l<t;l+=1)e=e.multiply(O([1,B.gexp(l)],0));return e},a.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case E.MODE_NUMBER:return 10;case E.MODE_ALPHA_NUM:return 9;case E.MODE_8BIT_BYTE:return 8;case E.MODE_KANJI:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case E.MODE_NUMBER:return 12;case E.MODE_ALPHA_NUM:return 11;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 10;default:throw"mode:"+t}else if(e<41)switch(t){case E.MODE_NUMBER:return 14;case E.MODE_ALPHA_NUM:return 13;case E.MODE_8BIT_BYTE:return 16;case E.MODE_KANJI:return 12;default:throw"mode:"+t}else throw"type:"+e},a.getLostPoint=function(t){for(var e=t.getModuleCount(),l=0,u=0;u<e;u+=1)for(var g=0;g<e;g+=1){for(var A=0,_=t.isDark(u,g),T=-1;T<=1;T+=1)if(!(u+T<0||e<=u+T))for(var j=-1;j<=1;j+=1)g+j<0||e<=g+j||T==0&&j==0||_==t.isDark(u+T,g+j)&&(A+=1);A>5&&(l+=3+A-5)}for(var u=0;u<e-1;u+=1)for(var g=0;g<e-1;g+=1){var Q=0;t.isDark(u,g)&&(Q+=1),t.isDark(u+1,g)&&(Q+=1),t.isDark(u,g+1)&&(Q+=1),t.isDark(u+1,g+1)&&(Q+=1),(Q==0||Q==4)&&(l+=3)}for(var u=0;u<e;u+=1)for(var g=0;g<e-6;g+=1)t.isDark(u,g)&&!t.isDark(u,g+1)&&t.isDark(u,g+2)&&t.isDark(u,g+3)&&t.isDark(u,g+4)&&!t.isDark(u,g+5)&&t.isDark(u,g+6)&&(l+=40);for(var g=0;g<e;g+=1)for(var u=0;u<e-6;u+=1)t.isDark(u,g)&&!t.isDark(u+1,g)&&t.isDark(u+2,g)&&t.isDark(u+3,g)&&t.isDark(u+4,g)&&!t.isDark(u+5,g)&&t.isDark(u+6,g)&&(l+=40);for(var Z=0,g=0;g<e;g+=1)for(var u=0;u<e;u+=1)t.isDark(u,g)&&(Z+=1);var z=Math.abs(100*Z/e/e-50)/5;return l+=z*10,l},a}(),B=function(){for(var v=new Array(256),p=new Array(256),f=0;f<8;f+=1)v[f]=1<<f;for(var f=8;f<256;f+=1)v[f]=v[f-4]^v[f-5]^v[f-6]^v[f-8];for(var f=0;f<255;f+=1)p[v[f]]=f;var d={};return d.glog=function(a){if(a<1)throw"glog("+a+")";return p[a]},d.gexp=function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return v[a]},d}();function O(v,p){if(typeof v.length>"u")throw v.length+"/"+p;var f=function(){for(var a=0;a<v.length&&v[a]==0;)a+=1;for(var c=new Array(v.length-a+p),t=0;t<v.length-a;t+=1)c[t]=v[t+a];return c}(),d={};return d.getAt=function(a){return f[a]},d.getLength=function(){return f.length},d.multiply=function(a){for(var c=new Array(d.getLength()+a.getLength()-1),t=0;t<d.getLength();t+=1)for(var e=0;e<a.getLength();e+=1)c[t+e]^=B.gexp(B.glog(d.getAt(t))+B.glog(a.getAt(e)));return O(c,0)},d.mod=function(a){if(d.getLength()-a.getLength()<0)return d;for(var c=B.glog(d.getAt(0))-B.glog(a.getAt(0)),t=new Array(d.getLength()),e=0;e<d.getLength();e+=1)t[e]=d.getAt(e);for(var e=0;e<a.getLength();e+=1)t[e]^=B.gexp(B.glog(a.getAt(e))+c);return O(t,0).mod(a)},d}var F=function(){var v=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],p=function(a,c){var t={};return t.totalCount=a,t.dataCount=c,t},f={},d=function(a,c){switch(c){case I.L:return v[(a-1)*4+0];case I.M:return v[(a-1)*4+1];case I.Q:return v[(a-1)*4+2];case I.H:return v[(a-1)*4+3];default:return}};return f.getRSBlocks=function(a,c){var t=d(a,c);if(typeof t>"u")throw"bad rs block @ typeNumber:"+a+"/errorCorrectionLevel:"+c;for(var e=t.length/3,l=[],u=0;u<e;u+=1)for(var g=t[u*3+0],A=t[u*3+1],_=t[u*3+2],T=0;T<g;T+=1)l.push(p(A,_));return l},f}(),V=function(){var v=[],p=0,f={};return f.getBuffer=function(){return v},f.getAt=function(d){var a=Math.floor(d/8);return(v[a]>>>7-d%8&1)==1},f.put=function(d,a){for(var c=0;c<a;c+=1)f.putBit((d>>>a-c-1&1)==1)},f.getLengthInBits=function(){return p},f.putBit=function(d){var a=Math.floor(p/8);v.length<=a&&v.push(0),d&&(v[a]|=128>>>p%8),p+=1},f},W=function(v){var p=E.MODE_NUMBER,f=v,d={};d.getMode=function(){return p},d.getLength=function(t){return f.length},d.write=function(t){for(var e=f,l=0;l+2<e.length;)t.put(a(e.substring(l,l+3)),10),l+=3;l<e.length&&(e.length-l==1?t.put(a(e.substring(l,l+1)),4):e.length-l==2&&t.put(a(e.substring(l,l+2)),7))};var a=function(t){for(var e=0,l=0;l<t.length;l+=1)e=e*10+c(t.charAt(l));return e},c=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-48;throw"illegal char :"+t};return d},re=function(v){var p=E.MODE_ALPHA_NUM,f=v,d={};d.getMode=function(){return p},d.getLength=function(c){return f.length},d.write=function(c){for(var t=f,e=0;e+1<t.length;)c.put(a(t.charAt(e))*45+a(t.charAt(e+1)),11),e+=2;e<t.length&&c.put(a(t.charAt(e)),6)};var a=function(c){if("0"<=c&&c<="9")return c.charCodeAt(0)-48;if("A"<=c&&c<="Z")return c.charCodeAt(0)-65+10;switch(c){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+c}};return d},k=function(v){var p=E.MODE_8BIT_BYTE,f=S.stringToBytes(v),d={};return d.getMode=function(){return p},d.getLength=function(a){return f.length},d.write=function(a){for(var c=0;c<f.length;c+=1)a.put(f[c],8)},d},w=function(v){var p=E.MODE_KANJI,f=S.stringToBytesFuncs.SJIS;if(!f)throw"sjis not supported.";(function(c,t){var e=f(c);if(e.length!=2||(e[0]<<8|e[1])!=t)throw"sjis not supported."})("友",38726);var d=f(v),a={};return a.getMode=function(){return p},a.getLength=function(c){return~~(d.length/2)},a.write=function(c){for(var t=d,e=0;e+1<t.length;){var l=(255&t[e])<<8|255&t[e+1];if(33088<=l&&l<=40956)l-=33088;else if(57408<=l&&l<=60351)l-=49472;else throw"illegal char at "+(e+1)+"/"+l;l=(l>>>8&255)*192+(l&255),c.put(l,13),e+=2}if(e<t.length)throw"illegal char at "+(e+1)},a},D=function(){var v=[],p={};return p.writeByte=function(f){v.push(f&255)},p.writeShort=function(f){p.writeByte(f),p.writeByte(f>>>8)},p.writeBytes=function(f,d,a){d=d||0,a=a||f.length;for(var c=0;c<a;c+=1)p.writeByte(f[c+d])},p.writeString=function(f){for(var d=0;d<f.length;d+=1)p.writeByte(f.charCodeAt(d))},p.toByteArray=function(){return v},p.toString=function(){var f="";f+="[";for(var d=0;d<v.length;d+=1)d>0&&(f+=","),f+=v[d];return f+="]",f},p},C=function(){var v=0,p=0,f=0,d="",a={},c=function(e){d+=String.fromCharCode(t(e&63))},t=function(e){if(!(e<0)){if(e<26)return 65+e;if(e<52)return 97+(e-26);if(e<62)return 48+(e-52);if(e==62)return 43;if(e==63)return 47}throw"n:"+e};return a.writeByte=function(e){for(v=v<<8|e&255,p+=8,f+=1;p>=6;)c(v>>>p-6),p-=6},a.flush=function(){if(p>0&&(c(v<<6-p),v=0,p=0),f%3!=0)for(var e=3-f%3,l=0;l<e;l+=1)d+="="},a.toString=function(){return d},a},$=function(v){var p=v,f=0,d=0,a=0,c={};c.read=function(){for(;a<8;){if(f>=p.length){if(a==0)return-1;throw"unexpected end of file./"+a}var e=p.charAt(f);if(f+=1,e=="=")return a=0,-1;if(e.match(/^\s$/))continue;d=d<<6|t(e.charCodeAt(0)),a+=6}var l=d>>>a-8&255;return a-=8,l};var t=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(e==43)return 62;if(e==47)return 63;throw"c:"+e};return c},G=function(v,p){var f=v,d=p,a=new Array(v*p),c={};c.setPixel=function(u,g,A){a[g*f+u]=A},c.write=function(u){u.writeString("GIF87a"),u.writeShort(f),u.writeShort(d),u.writeByte(128),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(0),u.writeByte(255),u.writeByte(255),u.writeByte(255),u.writeString(","),u.writeShort(0),u.writeShort(0),u.writeShort(f),u.writeShort(d),u.writeByte(0);var g=2,A=e(g);u.writeByte(g);for(var _=0;A.length-_>255;)u.writeByte(255),u.writeBytes(A,_,255),_+=255;u.writeByte(A.length-_),u.writeBytes(A,_,A.length-_),u.writeByte(0),u.writeString(";")};var t=function(u){var g=u,A=0,_=0,T={};return T.write=function(j,Q){if(j>>>Q)throw"length over";for(;A+Q>=8;)g.writeByte(255&(j<<A|_)),Q-=8-A,j>>>=8-A,_=0,A=0;_=j<<A|_,A=A+Q},T.flush=function(){A>0&&g.writeByte(_)},T},e=function(u){for(var g=1<<u,A=(1<<u)+1,_=u+1,T=l(),j=0;j<g;j+=1)T.add(String.fromCharCode(j));T.add(String.fromCharCode(g)),T.add(String.fromCharCode(A));var Q=D(),Z=t(Q);Z.write(g,_);var z=0,ee=String.fromCharCode(a[z]);for(z+=1;z<a.length;){var ne=String.fromCharCode(a[z]);z+=1,T.contains(ee+ne)?ee=ee+ne:(Z.write(T.indexOf(ee),_),T.size()<4095&&(T.size()==1<<_&&(_+=1),T.add(ee+ne)),ee=ne)}return Z.write(T.indexOf(ee),_),Z.write(A,_),Z.flush(),Q.toByteArray()},l=function(){var u={},g=0,A={};return A.add=function(_){if(A.contains(_))throw"dup key:"+_;u[_]=g,g+=1},A.size=function(){return g},A.indexOf=function(_){return u[_]},A.contains=function(_){return typeof u[_]<"u"},A};return c},H=function(v,p,f){for(var d=G(v,p),a=0;a<p;a+=1)for(var c=0;c<v;c+=1)d.setPixel(c,a,f(c,a));var t=D();d.write(t);for(var e=C(),l=t.toByteArray(),u=0;u<l.length;u+=1)e.writeByte(l[u]);return e.flush(),"data:image/gif;base64,"+e};return S}();(function(){J.stringToBytesFuncs["UTF-8"]=function(S){function E(I){for(var M=[],P=0;P<I.length;P++){var B=I.charCodeAt(P);B<128?M.push(B):B<2048?M.push(192|B>>6,128|B&63):B<55296||B>=57344?M.push(224|B>>12,128|B>>6&63,128|B&63):(P++,B=65536+((B&1023)<<10|I.charCodeAt(P)&1023),M.push(240|B>>18,128|B>>12&63,128|B>>6&63,128|B&63))}return M}return E(S)}})(),function(S){U.exports=S()}(function(){return J})}(ge)),ge.exports}var Ue=$e();const Fe=Ce(Ue),He=({qrCode:U})=>{const L=Fe(0,"L");return L.addData(U),L.make(),x.jsx("div",{dangerouslySetInnerHTML:{__html:L.createSvgTag(5)}})},se="FMSdarBAdtoan",ae="http://103.97.127.14:3000",Qe="ws://103.97.127.14:8081",Ke="http://103.97.127.14:5173/concepts/account/pricing",Je="http://103.97.127.14:5173/concepts/account/pricing",Ge=()=>{const[U,L]=X.useState(),[J,S]=X.useState(Number(localStorage.getItem("begin")));X.useEffect(()=>{const k=new WebSocket(`${Qe}`);return k.onopen=()=>{},k.onmessage=async w=>{const D=JSON.parse(w.data);if(D.status==="paid"){console.log(`Thanh toán thành công! Đơn hàng: ${D}`);const $=D.amount,G=D.id.replace(/([a-zA-Z]+)(package)$/,"$1_$2"),H=localStorage.getItem("token"),v=await te.get(`${ae}/packages/packages`,{headers:{Authorization:`Bearer ${H}`}});console.log(G),console.log(v.data);const f=v.data.find(d=>d.id===G);if(console.log(f),f)if(f.price===$){const d=Number(f.day);var C=localStorage.getItem("email");C&&(C=K.AES.decrypt(C,se).toString(K.enc.Utf8));const c=(await te.post(`${ae}/user/get-user-id?`,{email:C},{headers:{Authorization:`Bearer ${H}`}})).data.id;localStorage.setItem("userid",c);const t=new Date;t.setDate(t.getDate()+d);const e=t.toISOString().slice(0,19).replace("T"," ");await te.post(`${ae}/order/add-order-detail`,{id_account:c,id_package:f.id,expired_datetime:e},{headers:{Authorization:`Bearer ${H}`}})}else{const a=Number(f.day)*12;var C=localStorage.getItem("email");C&&(C=K.AES.decrypt(C,se).toString(K.enc.Utf8));const e=(await te.post(`${ae}/user/get-user-id?`,{email:C},{headers:{Authorization:`Bearer ${H}`}})).data.id;localStorage.setItem("userid",e);const l=new Date;l.setDate(l.getDate()+a);const u=l.toISOString().slice(0,19).replace("T"," ");await te.post(`${ae}/order/add-order-detail`,{id_account:e,id_package:f.id,expired_datetime:u},{headers:{Authorization:`Bearer ${H}`}})}P(!0)}},k.onclose=()=>{},()=>k.close()}),X.useEffect(()=>{var k=localStorage.getItem("begin");k&&(k=K.AES.decrypt(k,se).toString(K.enc.Utf8));var w=Number(k);S(w)}),X.useEffect(()=>{var k=localStorage.getItem("begin");k&&(k=K.AES.decrypt(k,se).toString(K.enc.Utf8));var w=localStorage.getItem("beginid");w&&(w=K.AES.decrypt(w,se).toString(K.enc.Utf8));var D=Number(k);(async()=>{try{const $={amount:D,orderCode:Date.now()%1e9,currency:"VND",returnUrl:`${Ke}`,cancelUrl:`${Je}`,description:w},G=localStorage.getItem("token"),H=await te.post(`${ae}/payment/create-payment`,$,{headers:{Authorization:`Bearer ${G}`}});H?L(H.data.qrCode):console.error("Lỗi khởi tạo:",H)}catch($){console.error("Lỗi khởi tạo:",$)}finally{I(!1)}})()},[J]);const[E,I]=X.useState(!1),[M,P]=X.useState(!1);ke();const{paymentDialog:B,setPaymentDialog:O,selectedPlan:F,setSelectedPlan:V}=ve(),W=async()=>{O(!1),await Se(200),V({}),P(!1)},re=async k=>{V({...F,paymentCycle:k});let w=0;F!=null&&F.price&&(F.paymentCycle==="monthly"?w=F.price.annually??0:w=F.price.monthly??0);try{var D=localStorage.getItem("beginid");D&&(D=K.AES.decrypt(D,se).toString(K.enc.Utf8));const C={amount:w,orderCode:Date.now()%1e9,currency:"VND",returnUrl:"http://localhost:5173/concepts/account/pricing",cancelUrl:"http://localhost:5173/concepts/account/pricing",description:D},$=localStorage.getItem("token"),G=await te.post(`${ae}/payment/create-payment`,C,{headers:{Authorization:`Bearer ${$}`}});G?L(G.data.qrCode):console.error("Lỗi khởi tạo:",G)}catch(C){console.error("Lỗi khởi tạo:",C)}finally{I(!1)}};return x.jsx(Pe,{isOpen:B,closable:!M,onClose:W,onRequestClose:W,children:M?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"text-center mt-6 mb-2",children:[x.jsx("div",{className:"inline-flex rounded-full p-5 bg-success",children:x.jsx(de,{className:"text-5xl text-white"})}),x.jsx("div",{className:"mt-6",children:x.jsx("h4",{children:"Thanh toán thành công!"})}),x.jsx("div",{className:"grid grid-cols-1 gap-2 mt-8",children:x.jsx(we,{block:!0,variant:"solid",onClick:W,children:"Đóng"})})]})}):x.jsxs(x.Fragment,{children:[x.jsxs("h4",{children:[F.planName," "]}),x.jsx("div",{className:"mt-6",children:x.jsx(ie,{defaultValue:F.paymentCycle,className:"gap-4 flex bg-transparent",onChange:k=>re(k),children:Object.entries(F.price||{}).map(([k,w])=>x.jsx(ie.Item,{value:k,children:({active:D,onSegmentItemClick:C})=>x.jsxs("div",{className:ye("flex justify-between border rounded-xl border-gray-300 dark:border-gray-600 py-5 px-4 select-none ring-1 w-1/2",D?"ring-primary border-primary":"ring-transparent bg-gray-100 dark:bg-gray-600"),role:"button",onClick:C,children:[x.jsxs("div",{children:[x.jsxs("div",{className:"heading-text mb-0.5",children:["Thanh toán theo"," ",k==="monthly"?"tháng":"năm"]}),x.jsxs("span",{className:"text-lg font-bold heading-text flex gap-0.5",children:[x.jsx(be,{displayType:"text",value:w,prefix:"$",thousandSeparator:!0}),x.jsx("span",{children:"/"}),x.jsx("span",{children:k==="monthly"?"tháng":"năm"})]})]}),D&&x.jsx(de,{className:"text-primary text-xl"})]})},k))})}),x.jsx("div",{className:"mt-6 border border-gray-200 dark:border-gray-600 rounded-lg",children:x.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:x.jsx("div",{className:"flex justify-center w-full",children:U&&x.jsx(He,{qrCode:U})})})})]})})},vt=()=>x.jsxs(x.Fragment,{children:[x.jsxs(De,{className:"mb-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsx("h3",{children:"Gói"}),x.jsx(Oe,{})]}),x.jsx(Re,{})]}),x.jsx(Ge,{})]});export{vt as default};
